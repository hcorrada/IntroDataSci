<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Lecture Notes: Introduction to Data Science</title>
  <meta name="description" content="Lecture Notes: Introduction to Data Science">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Lecture Notes: Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lecture Notes: Introduction to Data Science" />
  
  
  

<meta name="author" content="Héctor Corrada Bravo">


<meta name="date" content="2018-02-07">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="introduction-and-overview.html">
<link rel="next" href="setting-up-the-r-data-science-toolbox.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://bit.ly/hcb-ids">CMSC320 Intro. Data Science</a></li>
<li><a href="http://www.hcbravo.org">Hector Corrada Bravo</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="chapter" data-level="2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html"><i class="fa fa-check"></i><b>2</b> Introduction and Overview</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#what-is-data-science"><i class="fa fa-check"></i><b>2.1</b> What is Data Science?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data"><i class="fa fa-check"></i><b>2.1.1</b> Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#specific-questions"><i class="fa fa-check"></i><b>2.1.2</b> Specific Questions</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#interdisciplinary-activities"><i class="fa fa-check"></i><b>2.1.3</b> Interdisciplinary Activities</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-centric-artifacts-and-applications"><i class="fa fa-check"></i><b>2.1.4</b> Data-Centric Artifacts and Applications</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#why-data-science"><i class="fa fa-check"></i><b>2.2</b> Why Data Science?</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-science-in-society"><i class="fa fa-check"></i><b>2.3</b> Data Science in Society</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#course-organization"><i class="fa fa-check"></i><b>2.4</b> Course Organization</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#general-workflow"><i class="fa fa-check"></i><b>2.5</b> General Workflow</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#defining-the-goal"><i class="fa fa-check"></i><b>2.5.1</b> Defining the Goal</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-collection-and-management"><i class="fa fa-check"></i><b>2.5.2</b> Data Collection and Management</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#modeling"><i class="fa fa-check"></i><b>2.5.3</b> Modeling</a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#model-evaluation"><i class="fa fa-check"></i><b>2.5.4</b> Model Evaluation</a></li>
<li class="chapter" data-level="2.5.5" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#presentation"><i class="fa fa-check"></i><b>2.5.5</b> Presentation</a></li>
<li class="chapter" data-level="2.5.6" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#deployment"><i class="fa fa-check"></i><b>2.5.6</b> Deployment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html"><i class="fa fa-check"></i><b>3</b> An Illustrative Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#gathering-data"><i class="fa fa-check"></i><b>3.1</b> Gathering data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#movie-ratings"><i class="fa fa-check"></i><b>3.1.1</b> Movie ratings</a></li>
<li class="chapter" data-level="3.1.2" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#movie-budgets-and-revenue"><i class="fa fa-check"></i><b>3.1.2</b> Movie budgets and revenue</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#manipulating-the-data"><i class="fa fa-check"></i><b>3.2</b> Manipulating the data</a></li>
<li class="chapter" data-level="3.3" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#visualizing-the-data"><i class="fa fa-check"></i><b>3.3</b> Visualizing the data</a></li>
<li class="chapter" data-level="3.4" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#modeling-data"><i class="fa fa-check"></i><b>3.4</b> Modeling data</a></li>
<li class="chapter" data-level="3.5" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#visualizing-model-result"><i class="fa fa-check"></i><b>3.5</b> Visualizing model result</a></li>
<li class="chapter" data-level="3.6" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#abstracting-the-analysis"><i class="fa fa-check"></i><b>3.6</b> Abstracting the analysis</a></li>
<li class="chapter" data-level="3.7" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#making-analyses-accessible"><i class="fa fa-check"></i><b>3.7</b> Making analyses accessible</a></li>
<li class="chapter" data-level="3.8" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#summary"><i class="fa fa-check"></i><b>3.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html"><i class="fa fa-check"></i><b>4</b> Setting up the R Data Science Toolbox</a><ul>
<li class="chapter" data-level="4.1" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#some-history"><i class="fa fa-check"></i><b>4.1</b> Some history</a></li>
<li class="chapter" data-level="4.2" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#setting-up-r"><i class="fa fa-check"></i><b>4.2</b> Setting up R</a></li>
<li class="chapter" data-level="4.3" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#setting-up-rstudio"><i class="fa fa-check"></i><b>4.3</b> Setting up Rstudio</a></li>
<li class="chapter" data-level="4.4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#a-first-look-at-rstudio"><i class="fa fa-check"></i><b>4.4</b> A first look at Rstudio</a><ul>
<li class="chapter" data-level="4.4.1" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#interactive-console"><i class="fa fa-check"></i><b>4.4.1</b> Interactive Console</a></li>
<li class="chapter" data-level="4.4.2" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#data-viewer"><i class="fa fa-check"></i><b>4.4.2</b> Data Viewer</a></li>
<li class="chapter" data-level="4.4.3" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#names-values-and-functions"><i class="fa fa-check"></i><b>4.4.3</b> Names, values and functions</a></li>
<li class="chapter" data-level="4.4.4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#plotting"><i class="fa fa-check"></i><b>4.4.4</b> Plotting</a></li>
<li class="chapter" data-level="4.4.5" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#editor"><i class="fa fa-check"></i><b>4.4.5</b> Editor</a></li>
<li class="chapter" data-level="4.4.6" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#files-viewer"><i class="fa fa-check"></i><b>4.4.6</b> Files viewer</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#r-packages"><i class="fa fa-check"></i><b>4.5</b> R packages</a></li>
<li class="chapter" data-level="4.6" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#additional-r-resources"><i class="fa fa-check"></i><b>4.6</b> Additional R resources</a></li>
<li class="chapter" data-level="4.7" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#literate-programming"><i class="fa fa-check"></i><b>4.7</b> Literate Programming</a></li>
<li class="chapter" data-level="4.8" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#finishing-your-setup"><i class="fa fa-check"></i><b>4.8</b> Finishing your setup</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html"><i class="fa fa-check"></i><b>5</b> Measurements and Data Types</a><ul>
<li class="chapter" data-level="5.1" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#a-data-analysis-to-get-us-going"><i class="fa fa-check"></i><b>5.1</b> A data analysis to get us going</a></li>
<li class="chapter" data-level="5.2" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#getting-data"><i class="fa fa-check"></i><b>5.2</b> Getting data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#names-values-and-functions-1"><i class="fa fa-check"></i><b>5.2.1</b> Names, values and functions</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#entities-and-attributes"><i class="fa fa-check"></i><b>5.3</b> Entities and attributes</a></li>
<li class="chapter" data-level="5.4" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#categorical-attributes"><i class="fa fa-check"></i><b>5.4</b> Categorical attributes</a><ul>
<li class="chapter" data-level="5.4.1" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#factors-in-r"><i class="fa fa-check"></i><b>5.4.1</b> Factors in R</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#discrete-numeric-attributes"><i class="fa fa-check"></i><b>5.5</b> Discrete numeric attributes</a></li>
<li class="chapter" data-level="5.6" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#continuous-numeric-data"><i class="fa fa-check"></i><b>5.6</b> Continuous numeric data</a></li>
<li class="chapter" data-level="5.7" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#other-examples"><i class="fa fa-check"></i><b>5.7</b> Other examples</a></li>
<li class="chapter" data-level="5.8" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#other-important-datatypes"><i class="fa fa-check"></i><b>5.8</b> Other important datatypes</a></li>
<li class="chapter" data-level="5.9" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#units"><i class="fa fa-check"></i><b>5.9</b> Units</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html"><i class="fa fa-check"></i><b>6</b> Principles: Basic Operations</a><ul>
<li class="chapter" data-level="6.1" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#operations-that-select-attributes"><i class="fa fa-check"></i><b>6.1</b> Operations that select attributes</a><ul>
<li class="chapter" data-level="6.1.1" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#select"><i class="fa fa-check"></i><b>6.1.1</b> <code>select</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#rename"><i class="fa fa-check"></i><b>6.1.2</b> <code>rename</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#operations-that-select-entities"><i class="fa fa-check"></i><b>6.2</b> Operations that select entities</a><ul>
<li class="chapter" data-level="6.2.1" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#slice"><i class="fa fa-check"></i><b>6.2.1</b> <code>slice</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#filter"><i class="fa fa-check"></i><b>6.2.2</b> <code>filter</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#sample_n-and-sample_frac"><i class="fa fa-check"></i><b>6.2.3</b> <code>sample_n</code> and <code>sample_frac</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#pipelines-of-operations"><i class="fa fa-check"></i><b>6.3</b> Pipelines of operations</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="principles-more-operations.html"><a href="principles-more-operations.html"><i class="fa fa-check"></i><b>7</b> Principles: More Operations</a><ul>
<li class="chapter" data-level="7.1" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-sort-entities"><i class="fa fa-check"></i><b>7.1</b> Operations that sort entities</a></li>
<li class="chapter" data-level="7.2" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-create-new-attributes"><i class="fa fa-check"></i><b>7.2</b> Operations that create new attributes</a></li>
<li class="chapter" data-level="7.3" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-summarize-attribute-values-over-entities"><i class="fa fa-check"></i><b>7.3</b> Operations that summarize attribute values over entities</a></li>
<li class="chapter" data-level="7.4" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-group-entities"><i class="fa fa-check"></i><b>7.4</b> Operations that group entities</a></li>
<li class="chapter" data-level="7.5" data-path="principles-more-operations.html"><a href="principles-more-operations.html#vectors"><i class="fa fa-check"></i><b>7.5</b> Vectors</a></li>
<li class="chapter" data-level="7.6" data-path="principles-more-operations.html"><a href="principles-more-operations.html#attributes-as-vectors"><i class="fa fa-check"></i><b>7.6</b> Attributes as vectors</a></li>
<li class="chapter" data-level="7.7" data-path="principles-more-operations.html"><a href="principles-more-operations.html#functions"><i class="fa fa-check"></i><b>7.7</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html"><i class="fa fa-check"></i><b>8</b> Basic plotting with <code>ggplot</code></a><ul>
<li class="chapter" data-level="8.1" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#plot-construction-details"><i class="fa fa-check"></i><b>8.1</b> Plot Construction Details</a><ul>
<li class="chapter" data-level="8.1.1" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#mappings"><i class="fa fa-check"></i><b>8.1.1</b> Mappings</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#representations"><i class="fa fa-check"></i><b>8.1.2</b> Representations</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#frequently-used-plots"><i class="fa fa-check"></i><b>8.2</b> Frequently Used Plots</a><ul>
<li class="chapter" data-level="8.2.1" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#scatter-plot"><i class="fa fa-check"></i><b>8.2.1</b> Scatter plot</a></li>
<li class="chapter" data-level="8.2.2" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#bar-graph"><i class="fa fa-check"></i><b>8.2.2</b> Bar graph</a></li>
<li class="chapter" data-level="8.2.3" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#histogram"><i class="fa fa-check"></i><b>8.2.3</b> Histogram</a></li>
<li class="chapter" data-level="8.2.4" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#boxplot"><i class="fa fa-check"></i><b>8.2.4</b> Boxplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="brief-introduction-to-rmarkdown.html"><a href="brief-introduction-to-rmarkdown.html"><i class="fa fa-check"></i><b>9</b> Brief Introduction to Rmarkdown</a></li>
<li class="chapter" data-level="10" data-path="best-practices-for-data-science-projects.html"><a href="best-practices-for-data-science-projects.html"><i class="fa fa-check"></i><b>10</b> Best Practices for Data Science Projects</a></li>
<li class="chapter" data-level="11" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html"><i class="fa fa-check"></i><b>11</b> Tidy Data I: The ER Model</a><ul>
<li class="chapter" data-level="11.1" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#overview"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#the-entity-relationship-and-relational-models"><i class="fa fa-check"></i><b>11.2</b> The Entity-Relationship and Relational Models</a><ul>
<li class="chapter" data-level="11.2.1" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#formal-introduction-to-keys"><i class="fa fa-check"></i><b>11.2.1</b> Formal introduction to keys</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#tidy-data"><i class="fa fa-check"></i><b>11.3</b> Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="sql-i-single-table-queries.html"><a href="sql-i-single-table-queries.html"><i class="fa fa-check"></i><b>12</b> SQL I: Single Table Queries</a><ul>
<li class="chapter" data-level="12.1" data-path="sql-i-single-table-queries.html"><a href="sql-i-single-table-queries.html#group-by-and-summarize"><i class="fa fa-check"></i><b>12.1</b> Group-by and summarize</a></li>
<li class="chapter" data-level="12.2" data-path="sql-i-single-table-queries.html"><a href="sql-i-single-table-queries.html#subqueries"><i class="fa fa-check"></i><b>12.2</b> Subqueries</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lecture Notes: Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="an-illustrative-analysis" class="section level1">
<h1><span class="header-section-number">3</span> An Illustrative Analysis</h1>
<p><a href="http://fivethirtyeight.com" class="uri">http://fivethirtyeight.com</a> has a clever series of articles on the types of movies different actors make in their careers: <a href="https://fivethirtyeight.com/tag/hollywood-taxonomy/" class="uri">https://fivethirtyeight.com/tag/hollywood-taxonomy/</a></p>
<p>I’d like to do a similar analysis. Let’s do this in order:</p>
<ol style="list-style-type: decimal">
<li>Let’s do this analysis for Diego Luna</li>
<li>Let’s use a clustering algorithm to determine the different types of movies they make</li>
<li>Then, let’s write an application that performs this analysis for any actor and test it with Gael García Bernal</li>
<li>Let’s make the application interactive so that a user can change the actor and the number of movie clusters the method learns.</li>
</ol>
<p>For now, we will go step by step through this analysis without showing how we perform this analysis using R. As the course progresses, we will learn how to carry out these steps.</p>
<div id="gathering-data" class="section level2">
<h2><span class="header-section-number">3.1</span> Gathering data</h2>
<div id="movie-ratings" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Movie ratings</h3>
<p>For this analysis we need to get the movies Diego Luna was in, along with their Rotten Tomatoes ratings. For that we scrape this webpage: <a href="https://www.rottentomatoes.com/celebrity/diego_luna" class="uri">https://www.rottentomatoes.com/celebrity/diego_luna</a>.</p>
<p>Once we scrape the data from the Rotten Tomatoes website and clean it up, this is part of what we have so far:</p>
<table>
<thead>
<tr class="header">
<th align="right">RATING</th>
<th align="left">TITLE</th>
<th align="left">CREDIT</th>
<th align="left">BOX OFFICE</th>
<th align="right">YEAR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">5</td>
<td align="left">Flatliners</td>
<td align="left">Ray</td>
<td align="left">$16.9M</td>
<td align="right">2017</td>
</tr>
<tr class="even">
<td align="right">85</td>
<td align="left">Rogue One: A Star Wars Story</td>
<td align="left">Captain Cassian Andor</td>
<td align="left">$532.2M</td>
<td align="right">2016</td>
</tr>
<tr class="odd">
<td align="right">88</td>
<td align="left">Blood Father</td>
<td align="left">Jonah</td>
<td align="left">—</td>
<td align="right">2016</td>
</tr>
<tr class="even">
<td align="right">82</td>
<td align="left">The Book of Life</td>
<td align="left">Manolo</td>
<td align="left">—</td>
<td align="right">2014</td>
</tr>
<tr class="odd">
<td align="right">100</td>
<td align="left">I Stay with You (Me quedo contigo)</td>
<td align="left">Actor</td>
<td align="left">—</td>
<td align="right">2014</td>
</tr>
<tr class="even">
<td align="right">67</td>
<td align="left">Elysium</td>
<td align="left">Julio</td>
<td align="left">$90.8M</td>
<td align="right">2013</td>
</tr>
<tr class="odd">
<td align="right">41</td>
<td align="left">Casa de mi padre</td>
<td align="left">Raul</td>
<td align="left">$5.9M</td>
<td align="right">2012</td>
</tr>
</tbody>
</table>
<p>This data includes, for each of the movies Diego Luna has acted in, the rotten tomatoes rating, the movie title, Diego Luna’s role in the movie, the U.S. domestic gross and the year of release.</p>
</div>
<div id="movie-budgets-and-revenue" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Movie budgets and revenue</h3>
<p>For the movie budgets and revenue data we scrape this webpage: <a href="http://www.the-numbers.com/movie/budgets/all" class="uri">http://www.the-numbers.com/movie/budgets/all</a></p>
<p>(Note 01.2018: after the initial version of this analysis, this website added pagination to this URL. We will be using the CSV file scraped originally in Summer 2017 for this analysis and leave the issue of dealing with pagination as an exercise.)</p>
<pre><code>## Parsed with column specification:
## cols(
##   release_date = col_date(format = &quot;&quot;),
##   movie = col_character(),
##   production_budget = col_double(),
##   domestic_gross = col_double(),
##   worldwide_gross = col_double()
## )</code></pre>
<p>This is part of what we have for that table after loading and cleaning up:</p>
<table>
<thead>
<tr class="header">
<th align="left">release_date</th>
<th align="left">movie</th>
<th align="right">production_budget</th>
<th align="right">domestic_gross</th>
<th align="right">worldwide_gross</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2009-12-18</td>
<td align="left">Avatar</td>
<td align="right">425</td>
<td align="right">760.50762</td>
<td align="right">2783.9190</td>
</tr>
<tr class="even">
<td align="left">2015-12-18</td>
<td align="left">Star Wars Ep. VII: The Force Awakens</td>
<td align="right">306</td>
<td align="right">936.66223</td>
<td align="right">2058.6622</td>
</tr>
<tr class="odd">
<td align="left">2007-05-24</td>
<td align="left">Pirates of the Caribbean: At World’s End</td>
<td align="right">300</td>
<td align="right">309.42043</td>
<td align="right">963.4204</td>
</tr>
<tr class="even">
<td align="left">2015-11-06</td>
<td align="left">Spectre</td>
<td align="right">300</td>
<td align="right">200.07417</td>
<td align="right">879.6209</td>
</tr>
<tr class="odd">
<td align="left">2012-07-20</td>
<td align="left">The Dark Knight Rises</td>
<td align="right">275</td>
<td align="right">448.13910</td>
<td align="right">1084.4391</td>
</tr>
<tr class="even">
<td align="left">2013-07-02</td>
<td align="left">The Lone Ranger</td>
<td align="right">275</td>
<td align="right">89.30212</td>
<td align="right">260.0021</td>
</tr>
<tr class="odd">
<td align="left">2012-03-09</td>
<td align="left">John Carter</td>
<td align="right">275</td>
<td align="right">73.05868</td>
<td align="right">282.7781</td>
</tr>
<tr class="even">
<td align="left">2010-11-24</td>
<td align="left">Tangled</td>
<td align="right">260</td>
<td align="right">200.82194</td>
<td align="right">586.5819</td>
</tr>
<tr class="odd">
<td align="left">2007-05-04</td>
<td align="left">Spider-Man 3</td>
<td align="right">258</td>
<td align="right">336.53030</td>
<td align="right">890.8753</td>
</tr>
<tr class="even">
<td align="left">2015-05-01</td>
<td align="left">Avengers: Age of Ultron</td>
<td align="right">250</td>
<td align="right">459.00587</td>
<td align="right">1404.7059</td>
</tr>
</tbody>
</table>
<p>This data is for 5358 movies, including its release date, title, production budget and total gross revenue. The latter two are in millions of U.S. dollars.</p>
<p>One thing we might want to check is if the budget and gross entries in this table are inflation adjusted or not. To do this, we can make a plot of domestic gross, which we are using for the subsequent analyses.</p>
<pre><code>## Loading required package: methods</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<p><img src="lecture-notes_csmc320_files/figure-html/unnamed-chunk-4-1.svg" width="672" /></p>
<p>Although we don’t know for sure, since the source of our data does not state this specifically, it looks like the domestic gross measurement is not inflation adjusted since gross increases over time.</p>
</div>
</div>
<div id="manipulating-the-data" class="section level2">
<h2><span class="header-section-number">3.2</span> Manipulating the data</h2>
<p>Next, we combine the datasets we obtained to get closer to the data we need to make the plot we want.</p>
<p>We combine the two datasets using the movie title, so that the end result has the information in both tables for each movie.</p>
<table>
<thead>
<tr class="header">
<th align="right">RATING</th>
<th align="left">TITLE</th>
<th align="left">CREDIT</th>
<th align="left">BOX OFFICE</th>
<th align="right">YEAR</th>
<th align="left">release_date</th>
<th align="right">production_budget</th>
<th align="right">domestic_gross</th>
<th align="right">worldwide_gross</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">5</td>
<td align="left">Flatliners</td>
<td align="left">Ray</td>
<td align="left">$16.9M</td>
<td align="right">2017</td>
<td align="left">1990-08-10</td>
<td align="right">26.0</td>
<td align="right">61.30815</td>
<td align="right">61.30815</td>
</tr>
<tr class="even">
<td align="right">85</td>
<td align="left">Rogue One: A Star Wars Story</td>
<td align="left">Captain Cassian Andor</td>
<td align="left">$532.2M</td>
<td align="right">2016</td>
<td align="left">2016-12-16</td>
<td align="right">200.0</td>
<td align="right">532.17732</td>
<td align="right">1050.98849</td>
</tr>
<tr class="odd">
<td align="right">82</td>
<td align="left">The Book of Life</td>
<td align="left">Manolo</td>
<td align="left">—</td>
<td align="right">2014</td>
<td align="left">2014-10-17</td>
<td align="right">50.0</td>
<td align="right">50.15154</td>
<td align="right">97.65154</td>
</tr>
<tr class="even">
<td align="right">67</td>
<td align="left">Elysium</td>
<td align="left">Julio</td>
<td align="left">$90.8M</td>
<td align="right">2013</td>
<td align="left">2013-08-09</td>
<td align="right">120.0</td>
<td align="right">93.05012</td>
<td align="right">286.19209</td>
</tr>
<tr class="odd">
<td align="right">51</td>
<td align="left">Contraband</td>
<td align="left">Gonzalo</td>
<td align="left">$66.5M</td>
<td align="right">2012</td>
<td align="left">2012-01-13</td>
<td align="right">25.0</td>
<td align="right">66.52800</td>
<td align="right">98.40685</td>
</tr>
<tr class="even">
<td align="right">94</td>
<td align="left">Milk</td>
<td align="left">Jack Lira</td>
<td align="left">$31.8M</td>
<td align="right">2008</td>
<td align="left">2008-11-26</td>
<td align="right">20.0</td>
<td align="right">31.84130</td>
<td align="right">57.29337</td>
</tr>
<tr class="odd">
<td align="right">69</td>
<td align="left">Criminal</td>
<td align="left">Rodrigo</td>
<td align="left">$0.8M</td>
<td align="right">2004</td>
<td align="left">2016-04-15</td>
<td align="right">31.5</td>
<td align="right">14.70870</td>
<td align="right">38.77126</td>
</tr>
<tr class="even">
<td align="right">60</td>
<td align="left">The Terminal</td>
<td align="left">Enrique Cruz</td>
<td align="left">$77.1M</td>
<td align="right">2004</td>
<td align="left">2004-06-18</td>
<td align="right">75.0</td>
<td align="right">77.07396</td>
<td align="right">218.67396</td>
</tr>
<tr class="odd">
<td align="right">80</td>
<td align="left">Open Range</td>
<td align="left">Button</td>
<td align="left">$58.3M</td>
<td align="right">2003</td>
<td align="left">2003-08-15</td>
<td align="right">26.0</td>
<td align="right">58.33125</td>
<td align="right">68.61399</td>
</tr>
<tr class="even">
<td align="right">76</td>
<td align="left">Frida</td>
<td align="left">Alejandro Gomez</td>
<td align="left">$25.7M</td>
<td align="right">2002</td>
<td align="left">2002-10-25</td>
<td align="right">12.0</td>
<td align="right">25.88500</td>
<td align="right">56.13124</td>
</tr>
</tbody>
</table>
</div>
<div id="visualizing-the-data" class="section level2">
<h2><span class="header-section-number">3.3</span> Visualizing the data</h2>
<p>Now that we have the data we need, we can make a plot:</p>
<div class="figure"><span id="fig:unnamed-chunk-7"></span>
<img src="lecture-notes_csmc320_files/figure-html/unnamed-chunk-7-1.svg" alt="Ratings and U.S. Domestic Gross of Diego Luna's movies." width="672" />
<p class="caption">
Figure 3.1: Ratings and U.S. Domestic Gross of Diego Luna’s movies.
</p>
</div>
<p>We see that there is one clear outlier in Diego Luna’s movies, which probably is the one Star Wars movie he acted in. The remaining movies could potentially be grouped into two types of movies, those with higher rating and those with lower ratings.</p>
</div>
<div id="modeling-data" class="section level2">
<h2><span class="header-section-number">3.4</span> Modeling data</h2>
<p>We can use a clustering algorithm to partition Diego Luna’s movies. We can use the data we obtained so far and see if the k-means clustering algorithm partitions these movies into three sensible groups using the movie’s rating and domestic gross.</p>
<p>Let’s see how the movies are grouped:</p>
<table>
<thead>
<tr class="header">
<th align="left">TITLE</th>
<th align="right">RATING</th>
<th align="right">domestic_gross</th>
<th align="left">cluster</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">The Book of Life</td>
<td align="right">82</td>
<td align="right">50.15154</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">Milk</td>
<td align="right">94</td>
<td align="right">31.84130</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">Criminal</td>
<td align="right">69</td>
<td align="right">14.70870</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">Open Range</td>
<td align="right">80</td>
<td align="right">58.33125</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">Frida</td>
<td align="right">76</td>
<td align="right">25.88500</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">Rogue One: A Star Wars Story</td>
<td align="right">85</td>
<td align="right">532.17732</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">Flatliners</td>
<td align="right">5</td>
<td align="right">61.30815</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">Elysium</td>
<td align="right">67</td>
<td align="right">93.05012</td>
<td align="left">3</td>
</tr>
<tr class="odd">
<td align="left">Contraband</td>
<td align="right">51</td>
<td align="right">66.52800</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="left">The Terminal</td>
<td align="right">60</td>
<td align="right">77.07396</td>
<td align="left">3</td>
</tr>
</tbody>
</table>
</div>
<div id="visualizing-model-result" class="section level2">
<h2><span class="header-section-number">3.5</span> Visualizing model result</h2>
<p>Let’s remake the same plot as before, but use color to indicate each movie’s cluster assignment given by the k-means algorithm.</p>
<p><img src="lecture-notes_csmc320_files/figure-html/unnamed-chunk-10-1.svg" width="672" /></p>
<p>The algorithm did make the Star Wars movie it’s own group since it’s so different that the other movies. The grouping of the remaining movies is not as clean.</p>
<p>To make the plot and clustering more interpretable, let’s annotate the graph with some movie titles. In the k-means algorithm, each group of movies is represented by an average rating and an average domestic gross. What we can do is find the movie in each group that is closest to the average and use that movie title to annotate each group in the plot.</p>
<p><img src="lecture-notes_csmc320_files/figure-html/unnamed-chunk-12-1.svg" width="672" /></p>
<p>Roughly, movies are clustered into Star Wars and low vs. high rated movies. The latter seem to have some difference in domestic gross. For example, movies like <a href="https://www.rottentomatoes.com/m/1133499_1133499_terminal">“The Terminal”</a> have lower rating but make slightly more money than movies like <a href="https://www.rottentomatoes.com/m/frida">“Frida”</a>. We could use statistical modeling to see if that’s the case, but will skip that for now. Do note also, that the clustering algorithm we used seems to be assigning one of the movies incorrectly, which warrants further investigation.</p>
</div>
<div id="abstracting-the-analysis" class="section level2">
<h2><span class="header-section-number">3.6</span> Abstracting the analysis</h2>
<p>While not a tremendous success, we decide we want to carry on with this analysis. We would like to do this for other actors’ movies. One of the big advantages of using R is that we can write a piece of code that takes an actor’s name as input, and reproduces the steps of this analysis for that actor. We call these functions, we’ll see them and use them a lot in this course.</p>
<p>For our analysis, this function must do the following:</p>
<ol style="list-style-type: decimal">
<li>Scrape movie ratings from Rotten Tomatoes</li>
<li>Clean up the scraped data</li>
<li>Join with the budget data we downloaded previously</li>
<li>Perform the clustering algorithm</li>
<li>Make the final plot</li>
</ol>
<p>With this in mind, we can write functions for each of these steps, and then make one final function that puts all of these together.</p>
<p>For instance, let’s write the scraping function. It will take an actor’s name and output the scraped data.</p>
<p>Let’s test it with Gael García Bernal:</p>
<table>
<thead>
<tr class="header">
<th align="left">RATING</th>
<th align="left">TITLE</th>
<th align="left">CREDIT</th>
<th align="left">BOX OFFICE</th>
<th align="right">YEAR</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">91%</td>
<td align="left">The Kindergarten Teacher</td>
<td align="left">Actor</td>
<td align="left">—</td>
<td align="right">2018</td>
</tr>
<tr class="even">
<td align="left">No Score Yet</td>
<td align="left">Viva - A vida é uma festa</td>
<td align="left">Hector</td>
<td align="left">—</td>
<td align="right">2017</td>
</tr>
<tr class="odd">
<td align="left">97%</td>
<td align="left">Coco</td>
<td align="left">Hector</td>
<td align="left">$192M</td>
<td align="right">2017</td>
</tr>
</tbody>
</table>
<p>Good start. We can then write functions for each of the steps we did with Diego Luna before.</p>
<p>Then put all of these steps into one function that calls our new functions to put all of our analysis together:</p>
<p>We can test this with Gael García Bernal</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">analyze_actor</span>(<span class="st">&quot;Gael Garcia Bernal&quot;</span>)</code></pre></div>
<p><img src="lecture-notes_csmc320_files/figure-html/test_bbg-1.svg" width="672" /></p>
</div>
<div id="making-analyses-accessible" class="section level2">
<h2><span class="header-section-number">3.7</span> Making analyses accessible</h2>
<p>Now that we have written a function to analyze an actor’s movies, we can make these analyses easier to produce by creating an interactive application that wraps our new function. The <code>shiny</code> R package makes creating this type of application easy.</p>
<iframe src="https://hcorrada.shinyapps.io/movie_app/?showcase=0" width="672" height="600px">
</iframe>
</div>
<div id="summary" class="section level2">
<h2><span class="header-section-number">3.8</span> Summary</h2>
<p>In this analysis we saw examples of the common steps and operations in a data analysis:</p>
<ol style="list-style-type: decimal">
<li><p>Data ingestion: we scraped and cleaned data from publicly accessible sites</p></li>
<li><p>Data manipulation: we integrated data from multiple sources to prepare our analysis</p></li>
<li><p>Data visualization: we made plots to explore patterns in our data</p></li>
<li><p>Data modeling: we made a model to capture the grouping patterns in data automatically, using visualization to explore the results of this modeling</p></li>
<li><p>Publishing: we abstracted our analysis into an application that allows us and others to perform this analysis over more datasets and explore the result of modeling using a variety of parameters</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-and-overview.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="setting-up-the-r-data-science-toolbox.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
