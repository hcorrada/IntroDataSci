<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Lecture Notes: Introduction to Data Science</title>
  <meta name="description" content="Lecture Notes: Introduction to Data Science">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Lecture Notes: Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lecture Notes: Introduction to Data Science" />
  
  
  

<meta name="author" content="Héctor Corrada Bravo">


<meta name="date" content="2018-01-28">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="setting-up-the-r-data-science-toolbox.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://bit.ly/hcb-ids">CMSC320 Intro. Data Science</a></li>
<li><a href="http://www.hcbravo.org">Hector Corrada Bravo</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="chapter" data-level="2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html"><i class="fa fa-check"></i><b>2</b> Introduction and Overview</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#what-is-data-science"><i class="fa fa-check"></i><b>2.1</b> What is Data Science?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data"><i class="fa fa-check"></i><b>2.1.1</b> Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#specific-questions"><i class="fa fa-check"></i><b>2.1.2</b> Specific Questions</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#interdisciplinary-activities"><i class="fa fa-check"></i><b>2.1.3</b> Interdisciplinary Activities</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-centric-artifacts-and-applications"><i class="fa fa-check"></i><b>2.1.4</b> Data-Centric Artifacts and Applications</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#why-data-science"><i class="fa fa-check"></i><b>2.2</b> Why Data Science?</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-science-in-society"><i class="fa fa-check"></i><b>2.3</b> Data Science in Society</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#course-organization"><i class="fa fa-check"></i><b>2.4</b> Course Organization</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#general-workflow"><i class="fa fa-check"></i><b>2.5</b> General Workflow</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#defining-the-goal"><i class="fa fa-check"></i><b>2.5.1</b> Defining the Goal</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-collection-and-management"><i class="fa fa-check"></i><b>2.5.2</b> Data Collection and Management</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#modeling"><i class="fa fa-check"></i><b>2.5.3</b> Modeling</a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#model-evaluation"><i class="fa fa-check"></i><b>2.5.4</b> Model Evaluation</a></li>
<li class="chapter" data-level="2.5.5" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#presentation"><i class="fa fa-check"></i><b>2.5.5</b> Presentation</a></li>
<li class="chapter" data-level="2.5.6" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#deployment"><i class="fa fa-check"></i><b>2.5.6</b> Deployment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html"><i class="fa fa-check"></i><b>3</b> An Illustrative Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#gathering-data"><i class="fa fa-check"></i><b>3.1</b> Gathering data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#movie-ratings"><i class="fa fa-check"></i><b>3.1.1</b> Movie ratings</a></li>
<li class="chapter" data-level="3.1.2" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#movie-budgets-and-revenue"><i class="fa fa-check"></i><b>3.1.2</b> Movie budgets and revenue</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#manipulating-the-data"><i class="fa fa-check"></i><b>3.2</b> Manipulating the data</a></li>
<li class="chapter" data-level="3.3" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#visualizing-the-data"><i class="fa fa-check"></i><b>3.3</b> Visualizing the data</a></li>
<li class="chapter" data-level="3.4" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#modeling-data"><i class="fa fa-check"></i><b>3.4</b> Modeling data</a></li>
<li class="chapter" data-level="3.5" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#visualizing-model-result"><i class="fa fa-check"></i><b>3.5</b> Visualizing model result</a></li>
<li class="chapter" data-level="3.6" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#abstracting-the-analysis"><i class="fa fa-check"></i><b>3.6</b> Abstracting the analysis</a></li>
<li class="chapter" data-level="3.7" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#making-analyses-accessible"><i class="fa fa-check"></i><b>3.7</b> Making analyses accessible</a></li>
<li class="chapter" data-level="3.8" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#summary"><i class="fa fa-check"></i><b>3.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html"><i class="fa fa-check"></i><b>4</b> Setting up the R Data Science Toolbox</a><ul>
<li class="chapter" data-level="4.1" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#some-history"><i class="fa fa-check"></i><b>4.1</b> Some history</a></li>
<li class="chapter" data-level="4.2" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#setting-up-r"><i class="fa fa-check"></i><b>4.2</b> Setting up R</a></li>
<li class="chapter" data-level="4.3" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#setting-up-rstudio"><i class="fa fa-check"></i><b>4.3</b> Setting up Rstudio</a></li>
<li class="chapter" data-level="4.4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#a-first-look-at-rstudio"><i class="fa fa-check"></i><b>4.4</b> A first look at Rstudio</a><ul>
<li class="chapter" data-level="4.4.1" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#interactive-console"><i class="fa fa-check"></i><b>4.4.1</b> Interactive Console</a></li>
<li class="chapter" data-level="4.4.2" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#data-viewer"><i class="fa fa-check"></i><b>4.4.2</b> Data Viewer</a></li>
<li class="chapter" data-level="4.4.3" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#names-values-and-functions"><i class="fa fa-check"></i><b>4.4.3</b> Names, values and functions</a></li>
<li class="chapter" data-level="4.4.4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#plotting"><i class="fa fa-check"></i><b>4.4.4</b> Plotting</a></li>
<li class="chapter" data-level="4.4.5" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#editor"><i class="fa fa-check"></i><b>4.4.5</b> Editor</a></li>
<li class="chapter" data-level="4.4.6" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#files-viewer"><i class="fa fa-check"></i><b>4.4.6</b> Files viewer</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#r-packages"><i class="fa fa-check"></i><b>4.5</b> R packages</a></li>
<li class="chapter" data-level="4.6" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#additional-r-resources"><i class="fa fa-check"></i><b>4.6</b> Additional R resources</a></li>
<li class="chapter" data-level="4.7" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#literate-programming"><i class="fa fa-check"></i><b>4.7</b> Literate Programming</a></li>
<li class="chapter" data-level="4.8" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#finishing-your-setup"><i class="fa fa-check"></i><b>4.8</b> Finishing your setup</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-principles.html"><a href="r-principles.html"><i class="fa fa-check"></i><b>5</b> R Principles</a><ul>
<li class="chapter" data-level="5.1" data-path="r-principles.html"><a href="r-principles.html#a-data-analysis-to-get-us-going"><i class="fa fa-check"></i><b>5.1</b> A data analysis to get us going</a></li>
<li class="chapter" data-level="5.2" data-path="r-principles.html"><a href="r-principles.html#getting-data"><i class="fa fa-check"></i><b>5.2</b> Getting data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-principles.html"><a href="r-principles.html#names-values-and-functions-1"><i class="fa fa-check"></i><b>5.2.1</b> Names, values and functions</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-principles.html"><a href="r-principles.html#data-frame-operations-1"><i class="fa fa-check"></i><b>5.3</b> Data Frame Operations (1)</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-principles.html"><a href="r-principles.html#operations-that-select-attributes"><i class="fa fa-check"></i><b>5.3.1</b> Operations that select attributes</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-principles.html"><a href="r-principles.html#rename"><i class="fa fa-check"></i><b>5.3.2</b> <code>rename</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lecture Notes: Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-principles" class="section level1">
<h1><span class="header-section-number">5</span> R Principles</h1>
<p>Now that we have our tools ready, let’s start doing some analysis. First, let’s go over some principles of R as a data analysis environment. R is a computational environment for data analysis. It is designed around a <em>functional</em> language, as opposed to <em>procedural</em> languages like Java or C, that has desirable properties for the type of operations and workflows that are frequently performed in the course of analyzing datasets. In this exercise we will start learning some of those desirable properties while performing an analysis of a real dataset.</p>
<div id="a-data-analysis-to-get-us-going" class="section level2">
<h2><span class="header-section-number">5.1</span> A data analysis to get us going</h2>
<p>I’m going to do an analysis of Baltimore crime to guide our discussion of R. We’ll use data downloaded from Baltimore City’s awesome open data site (this was downloaded a couple of years ago so if you download now, you will get different results).</p>
<p>The repository for this particular data is here. <a href="https://data.baltimorecity.gov/Crime/BPD-Arrests/3i3v-ibrt" class="uri">https://data.baltimorecity.gov/Crime/BPD-Arrests/3i3v-ibrt</a></p>
</div>
<div id="getting-data" class="section level2">
<h2><span class="header-section-number">5.2</span> Getting data</h2>
<p>We’ve prepared the data previously into a comma-separated value file (<code>.csv</code> file): each line contains attribute values (separated by commas) describing arrests in the City of Baltimore. The <code>read_csv</code> command is part of the <code>readr</code> R package and allows you to read a dataset stored in a csv file. This function is extremely versatile, and you can read more about it by using the standard help system in R: <code>?read_csv</code>. The result of running calling this function is the data itself, so, by running the function in the console, the result of the function is printed.</p>
<p>To make use of this dataset we want to assign the result of calling <code>read_csv</code> (i.e., the dataset) to a variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
arrest_tab &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/BPD_Arrests.csv&quot;</span>)
arrest_tab</code></pre></div>
<pre><code>## # A tibble: 104,528 x 15
##      arrest   age race  sex   arrestDate arrestTime arrestLocation      
##       &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;time&gt;     &lt;chr&gt;               
##  1 11126858    23 B     M     01/01/2011 00&#39;00&quot;     &lt;NA&gt;                
##  2 11127013    37 B     M     01/01/2011 01&#39;00&quot;     2000 Wilkens Ave    
##  3 11126887    46 B     M     01/01/2011 01&#39;00&quot;     2800 Mayfield Ave   
##  4 11126873    50 B     M     01/01/2011 04&#39;00&quot;     2100 Ashburton St   
##  5 11126968    33 B     M     01/01/2011 05&#39;00&quot;     4000 Wilsby Ave     
##  6 11127041    41 B     M     01/01/2011 05&#39;00&quot;     2900 Spellman Rd    
##  7 11126932    29 B     M     01/01/2011 05&#39;00&quot;     800 N Monroe St     
##  8 11126940    20 W     M     01/01/2011 05&#39;00&quot;     5200 Moravia Rd     
##  9 11127051    24 B     M     01/01/2011 07&#39;00&quot;     2400 Gainsdbourgh Ct
## 10 11127018    53 B     M     01/01/2011 15&#39;00&quot;     3300 Woodland Ave   
## # ... with 104,518 more rows, and 8 more variables: incidentOffense &lt;chr&gt;,
## #   incidentLocation &lt;chr&gt;, charge &lt;chr&gt;, chargeDescription &lt;chr&gt;,
## #   district &lt;chr&gt;, post &lt;int&gt;, neighborhood &lt;chr&gt;, `Location 1` &lt;chr&gt;</code></pre>
<p>Now we can ask what <em>type</em> of value is stored in the <code>arrest_tab</code> variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(arrest_tab)</code></pre></div>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>The <code>data.frame</code> is a workhorse data structure in R. It encapsulates the idea of <em>entities</em> (in rows) and <em>attribute values</em> (in columns). The other types <code>tbl_df</code> and <code>tbl</code> are added by <code>tidyverse</code> for improved functionality.</p>
<p>We can ask other features of this dataset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># This is a comment in R, by the way</span>

<span class="co"># How many rows (entities) does this dataset contain?</span>
<span class="kw">nrow</span>(arrest_tab)</code></pre></div>
<pre><code>## [1] 104528</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># How many columns (attributes)?</span>
<span class="kw">ncol</span>(arrest_tab)</code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># What are the names of those columns?</span>
<span class="kw">colnames</span>(arrest_tab)</code></pre></div>
<pre><code>##  [1] &quot;arrest&quot;            &quot;age&quot;               &quot;race&quot;             
##  [4] &quot;sex&quot;               &quot;arrestDate&quot;        &quot;arrestTime&quot;       
##  [7] &quot;arrestLocation&quot;    &quot;incidentOffense&quot;   &quot;incidentLocation&quot; 
## [10] &quot;charge&quot;            &quot;chargeDescription&quot; &quot;district&quot;         
## [13] &quot;post&quot;              &quot;neighborhood&quot;      &quot;Location 1&quot;</code></pre>
<p>Now, in Rstudio you can view the data frame using <code>View(arrest_tab)</code>.</p>
<div id="names-values-and-functions-1" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Names, values and functions</h3>
<p>Let’s review the concepts of names values and functions again. In the console, we’ve now written a few instructions, e.g. <code>View(arrest_tab)</code>. Let’s take a closer look at how these instructions are put together.</p>
<p><strong><em>expressions</em></strong>: first of all, we call these instructions <em>expressions</em>, which are just text that R can evaluate into a value. <code>View(arrest_tab)</code> is an expression.</p>
<p><strong><em>values</em></strong>: so, what’s a value? They are numbers, strings, data frames, etc. This is the data we will be working with. The number <code>2</code> is a value. So is the string <code>&quot;Hector&quot;</code>.</p>
<p>So, what value is produced when R evaluates the expression <code>View(arrest_tab)</code>? Nothing, which we also treat as a value. That wasn’t very interesting, but it does have a side effect: it shows the <code>arrest_tab</code> dataset in the Data viewer.</p>
<p>How about a simpler expression: <code>arrest_tab</code>, what value is produced when R evaluates the expression <code>arrest_tab</code>? The data.frame containing that data. Try it out in the console.</p>
<p><strong><em>names</em></strong>: so if <code>arrest_tab</code> isn’t a value, what is it? It is a <em>name</em>. We use these to refer to values. So, when we write the expression <code>arrest_tab</code>, we tell R we want the <em>value</em> referenced by the name <code>arrest_tab</code>, that is, the data itself!</p>
<div class="figure">
<img src="img/names_values.png" />

</div>
<p><strong><em>functions</em></strong>: Besides numbers, strings, data frames, etc. another important type of value is the <em>function</em>. Functions are a series of instructions that take some input value and produce a different value. The name <code>View</code> refers to the function that takes a data frame as input, and displays it in the Data viewer. Functions are called using the parentheses we saw before: <code>View(arrest_tab)</code>, the parentheses say that you are passing input <code>arrest_tab</code> to the function <code>View</code>. We’ll see later how we can write our own functions.</p>
</div>
</div>
<div id="data-frame-operations-1" class="section level2">
<h2><span class="header-section-number">5.3</span> Data Frame Operations (1)</h2>
<p>Now that we have a data frame describing our data, let’s learn a few fundamental operations we perform on data frames on almost any analysis. We divide these first set of operations into two groups: operations on <em>attributes</em> and operations on <em>entitites</em>. These operations are defined in the <code>dplyr</code> package, part of the <code>tidyverse</code>, and are described in more detail in the “R for Data Science” textbook available in the course logistics page: <a href="http://r4ds.had.co.nz/transform.html" class="uri">http://r4ds.had.co.nz/transform.html</a>.</p>
<div id="operations-that-select-attributes" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Operations that select attributes</h3>
<div id="select" class="section level4">
<h4><span class="header-section-number">5.3.1.1</span> <code>select</code></h4>
<p>In our data set we have a large number of attributes describing each arrest. Now, suppose we only want to study patterns in these arrests based on a smaller number of attributes for purposes of efficiency, since we would operate over less data, or interpretability. In that case we would like to create a data frame that contains only those attributes of interest. We use the <code>select</code> function for this.</p>
<div class="figure">
<img src="img/select.png" />

</div>
<p>Let’s create a data frame containing only the <code>age</code>, <code>sex</code> and <code>district</code> attributes</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(arrest_tab, age, sex, district)</code></pre></div>
<pre><code>## # A tibble: 104,528 x 3
##      age sex   district    
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;       
##  1    23 M     &lt;NA&gt;        
##  2    37 M     SOUTHERN    
##  3    46 M     NORTHEASTERN
##  4    50 M     WESTERN     
##  5    33 M     NORTHERN    
##  6    41 M     SOUTHERN    
##  7    29 M     WESTERN     
##  8    20 M     NORTHEASTERN
##  9    24 M     &lt;NA&gt;        
## 10    53 M     NORTHWESTERN
## # ... with 104,518 more rows</code></pre>
<p>The first argument to the <code>select</code> function is the data frame we want to operate on, the remaining arguments describe the attributes we want to include in the resulting data frame.</p>
<p>Note a few other things:</p>
<ol style="list-style-type: decimal">
<li><p>The first argument to <code>select</code> is a data frame, and the value returned by <code>select</code> is also a data frame</p></li>
<li><p>As always you can learn more about the function using <code>?select</code></p></li>
</ol>
<p>Attribute descriptor arguments can be fairly sophisticated. For example, we can use positive integers to indicate attribute (column) indices:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(arrest_tab, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)</code></pre></div>
<pre><code>## # A tibble: 104,528 x 3
##      arrest race  sex  
##       &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 11126858 B     M    
##  2 11127013 B     M    
##  3 11126887 B     M    
##  4 11126873 B     M    
##  5 11126968 B     M    
##  6 11127041 B     M    
##  7 11126932 B     M    
##  8 11126940 W     M    
##  9 11127051 B     M    
## 10 11127018 B     M    
## # ... with 104,518 more rows</code></pre>
<p>R includes a useful operator to describe ranges. E.g., <code>1:5</code> would be attributes 1 through 5:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(arrest_tab, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</code></pre></div>
<pre><code>## # A tibble: 104,528 x 5
##      arrest   age race  sex   arrestDate
##       &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     
##  1 11126858    23 B     M     01/01/2011
##  2 11127013    37 B     M     01/01/2011
##  3 11126887    46 B     M     01/01/2011
##  4 11126873    50 B     M     01/01/2011
##  5 11126968    33 B     M     01/01/2011
##  6 11127041    41 B     M     01/01/2011
##  7 11126932    29 B     M     01/01/2011
##  8 11126940    20 W     M     01/01/2011
##  9 11127051    24 B     M     01/01/2011
## 10 11127018    53 B     M     01/01/2011
## # ... with 104,518 more rows</code></pre>
<p>We can also use other helper functions to create attribute descriptors. For example, to choose all attributes that begin with the letter <code>a</code> we can the <code>starts_with</code> function which uses partial string matching:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(arrest_tab, <span class="kw">starts_with</span>(<span class="st">&quot;a&quot;</span>))</code></pre></div>
<pre><code>## # A tibble: 104,528 x 5
##      arrest   age arrestDate arrestTime arrestLocation      
##       &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;time&gt;     &lt;chr&gt;               
##  1 11126858    23 01/01/2011 00&#39;00&quot;     &lt;NA&gt;                
##  2 11127013    37 01/01/2011 01&#39;00&quot;     2000 Wilkens Ave    
##  3 11126887    46 01/01/2011 01&#39;00&quot;     2800 Mayfield Ave   
##  4 11126873    50 01/01/2011 04&#39;00&quot;     2100 Ashburton St   
##  5 11126968    33 01/01/2011 05&#39;00&quot;     4000 Wilsby Ave     
##  6 11127041    41 01/01/2011 05&#39;00&quot;     2900 Spellman Rd    
##  7 11126932    29 01/01/2011 05&#39;00&quot;     800 N Monroe St     
##  8 11126940    20 01/01/2011 05&#39;00&quot;     5200 Moravia Rd     
##  9 11127051    24 01/01/2011 07&#39;00&quot;     2400 Gainsdbourgh Ct
## 10 11127018    53 01/01/2011 15&#39;00&quot;     3300 Woodland Ave   
## # ... with 104,518 more rows</code></pre>
<p>We can also use the attribute descriptor arguments to <em>drop</em> attributes. For instance using descriptor <code>-age</code> returns the arrest data frame with all but the <code>age</code> attribute included:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(arrest_tab, <span class="op">-</span>age)</code></pre></div>
<pre><code>## # A tibble: 104,528 x 14
##    arrest race  sex   arrestDate arrestTime arrestLocation incidentOffense
##     &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;      &lt;time&gt;     &lt;chr&gt;          &lt;chr&gt;          
##  1 1.11e⁷ B     M     01/01/2011 00&#39;00&quot;     &lt;NA&gt;           Unknown Offense
##  2 1.11e⁷ B     M     01/01/2011 01&#39;00&quot;     2000 Wilkens … 79-Other       
##  3 1.11e⁷ B     M     01/01/2011 01&#39;00&quot;     2800 Mayfield… Unknown Offense
##  4 1.11e⁷ B     M     01/01/2011 04&#39;00&quot;     2100 Ashburto… 79-Other       
##  5 1.11e⁷ B     M     01/01/2011 05&#39;00&quot;     4000 Wilsby A… Unknown Offense
##  6 1.11e⁷ B     M     01/01/2011 05&#39;00&quot;     2900 Spellman… 81-Recovered P…
##  7 1.11e⁷ B     M     01/01/2011 05&#39;00&quot;     800 N Monroe … 79-Other       
##  8 1.11e⁷ W     M     01/01/2011 05&#39;00&quot;     5200 Moravia … Unknown Offense
##  9 1.11e⁷ B     M     01/01/2011 07&#39;00&quot;     2400 Gainsdbo… 54-Armed Person
## 10 1.11e⁷ B     M     01/01/2011 15&#39;00&quot;     3300 Woodland… 54-Armed Person
## # ... with 104,518 more rows, and 7 more variables: incidentLocation
## #   &lt;chr&gt;, charge &lt;chr&gt;, chargeDescription &lt;chr&gt;, district &lt;chr&gt;, post
## #   &lt;int&gt;, neighborhood &lt;chr&gt;, `Location 1` &lt;chr&gt;</code></pre>
</div>
</div>
<div id="rename" class="section level3">
<h3><span class="header-section-number">5.3.2</span> <code>rename</code></h3>
<p>To improve interpretability during an analysis we may want to rename attributes. We use the <code>rename</code> function for this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rename</span>(arrest_tab, <span class="dt">arrest_date=</span>arrestDate)</code></pre></div>
<pre><code>## # A tibble: 104,528 x 15
##      arrest   age race  sex   arrest_date arrestTime arrestLocation      
##       &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;time&gt;     &lt;chr&gt;               
##  1 11126858    23 B     M     01/01/2011  00&#39;00&quot;     &lt;NA&gt;                
##  2 11127013    37 B     M     01/01/2011  01&#39;00&quot;     2000 Wilkens Ave    
##  3 11126887    46 B     M     01/01/2011  01&#39;00&quot;     2800 Mayfield Ave   
##  4 11126873    50 B     M     01/01/2011  04&#39;00&quot;     2100 Ashburton St   
##  5 11126968    33 B     M     01/01/2011  05&#39;00&quot;     4000 Wilsby Ave     
##  6 11127041    41 B     M     01/01/2011  05&#39;00&quot;     2900 Spellman Rd    
##  7 11126932    29 B     M     01/01/2011  05&#39;00&quot;     800 N Monroe St     
##  8 11126940    20 W     M     01/01/2011  05&#39;00&quot;     5200 Moravia Rd     
##  9 11127051    24 B     M     01/01/2011  07&#39;00&quot;     2400 Gainsdbourgh Ct
## 10 11127018    53 B     M     01/01/2011  15&#39;00&quot;     3300 Woodland Ave   
## # ... with 104,518 more rows, and 8 more variables: incidentOffense &lt;chr&gt;,
## #   incidentLocation &lt;chr&gt;, charge &lt;chr&gt;, chargeDescription &lt;chr&gt;,
## #   district &lt;chr&gt;, post &lt;int&gt;, neighborhood &lt;chr&gt;, `Location 1` &lt;chr&gt;</code></pre>
<p>Like <code>select</code>, the first argument to the function is the data frame we are operating on. The remaining arguemnts specify attributes to rename and the name they will have in the resulting data frame. Note that arguments in this case are <em>named</em> (have the form <code>lhs=rhs</code>). We can have selection <em>and</em> renaming by using named arguments in <code>select</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">select</span>(arrest_tab, age, sex, <span class="dt">arrest_date=</span>arrestDate)</code></pre></div>
<pre><code>## # A tibble: 104,528 x 3
##      age sex   arrest_date
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;      
##  1    23 M     01/01/2011 
##  2    37 M     01/01/2011 
##  3    46 M     01/01/2011 
##  4    50 M     01/01/2011 
##  5    33 M     01/01/2011 
##  6    41 M     01/01/2011 
##  7    29 M     01/01/2011 
##  8    20 M     01/01/2011 
##  9    24 M     01/01/2011 
## 10    53 M     01/01/2011 
## # ... with 104,518 more rows</code></pre>
<p>Also like <code>select</code>, the result of calling <code>rename</code> is a data frame. In fact, this will be the case for almost all operations in the <code>tidyverse</code> they operate on data frames (specified as the first argument in the function call) and return data frames.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="setting-up-the-r-data-science-toolbox.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
