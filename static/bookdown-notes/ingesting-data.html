<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Lecture Notes: Introduction to Data Science</title>
  <meta name="description" content="Lecture Notes: Introduction to Data Science">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="Lecture Notes: Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Lecture Notes: Introduction to Data Science" />
  
  
  

<meta name="author" content="Héctor Corrada Bravo">


<meta name="date" content="2018-03-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="db-parting-shots.html">
<link rel="next" href="tidying-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.2.0/str_view.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="http://bit.ly/hcb-ids">CMSC320 Intro. Data Science</a></li>
<li><a href="http://www.hcbravo.org">Hector Corrada Bravo</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preamble</a></li>
<li class="chapter" data-level="2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html"><i class="fa fa-check"></i><b>2</b> Introduction and Overview</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#what-is-data-science"><i class="fa fa-check"></i><b>2.1</b> What is Data Science?</a><ul>
<li class="chapter" data-level="2.1.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data"><i class="fa fa-check"></i><b>2.1.1</b> Data</a></li>
<li class="chapter" data-level="2.1.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#specific-questions"><i class="fa fa-check"></i><b>2.1.2</b> Specific Questions</a></li>
<li class="chapter" data-level="2.1.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#interdisciplinary-activities"><i class="fa fa-check"></i><b>2.1.3</b> Interdisciplinary Activities</a></li>
<li class="chapter" data-level="2.1.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-centric-artifacts-and-applications"><i class="fa fa-check"></i><b>2.1.4</b> Data-Centric Artifacts and Applications</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#why-data-science"><i class="fa fa-check"></i><b>2.2</b> Why Data Science?</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-science-in-society"><i class="fa fa-check"></i><b>2.3</b> Data Science in Society</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#course-organization"><i class="fa fa-check"></i><b>2.4</b> Course Organization</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#general-workflow"><i class="fa fa-check"></i><b>2.5</b> General Workflow</a><ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#defining-the-goal"><i class="fa fa-check"></i><b>2.5.1</b> Defining the Goal</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#data-collection-and-management"><i class="fa fa-check"></i><b>2.5.2</b> Data Collection and Management</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#modeling"><i class="fa fa-check"></i><b>2.5.3</b> Modeling</a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#model-evaluation"><i class="fa fa-check"></i><b>2.5.4</b> Model Evaluation</a></li>
<li class="chapter" data-level="2.5.5" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#presentation"><i class="fa fa-check"></i><b>2.5.5</b> Presentation</a></li>
<li class="chapter" data-level="2.5.6" data-path="introduction-and-overview.html"><a href="introduction-and-overview.html#deployment"><i class="fa fa-check"></i><b>2.5.6</b> Deployment</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html"><i class="fa fa-check"></i><b>3</b> An Illustrative Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#gathering-data"><i class="fa fa-check"></i><b>3.1</b> Gathering data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#movie-ratings"><i class="fa fa-check"></i><b>3.1.1</b> Movie ratings</a></li>
<li class="chapter" data-level="3.1.2" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#movie-budgets-and-revenue"><i class="fa fa-check"></i><b>3.1.2</b> Movie budgets and revenue</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#manipulating-the-data"><i class="fa fa-check"></i><b>3.2</b> Manipulating the data</a></li>
<li class="chapter" data-level="3.3" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#visualizing-the-data"><i class="fa fa-check"></i><b>3.3</b> Visualizing the data</a></li>
<li class="chapter" data-level="3.4" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#modeling-data"><i class="fa fa-check"></i><b>3.4</b> Modeling data</a></li>
<li class="chapter" data-level="3.5" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#visualizing-model-result"><i class="fa fa-check"></i><b>3.5</b> Visualizing model result</a></li>
<li class="chapter" data-level="3.6" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#abstracting-the-analysis"><i class="fa fa-check"></i><b>3.6</b> Abstracting the analysis</a></li>
<li class="chapter" data-level="3.7" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#making-analyses-accessible"><i class="fa fa-check"></i><b>3.7</b> Making analyses accessible</a></li>
<li class="chapter" data-level="3.8" data-path="an-illustrative-analysis.html"><a href="an-illustrative-analysis.html#summary"><i class="fa fa-check"></i><b>3.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html"><i class="fa fa-check"></i><b>4</b> Setting up the R Data Science Toolbox</a><ul>
<li class="chapter" data-level="4.1" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#some-history"><i class="fa fa-check"></i><b>4.1</b> Some history</a></li>
<li class="chapter" data-level="4.2" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#setting-up-r"><i class="fa fa-check"></i><b>4.2</b> Setting up R</a></li>
<li class="chapter" data-level="4.3" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#setting-up-rstudio"><i class="fa fa-check"></i><b>4.3</b> Setting up Rstudio</a></li>
<li class="chapter" data-level="4.4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#a-first-look-at-rstudio"><i class="fa fa-check"></i><b>4.4</b> A first look at Rstudio</a><ul>
<li class="chapter" data-level="4.4.1" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#interactive-console"><i class="fa fa-check"></i><b>4.4.1</b> Interactive Console</a></li>
<li class="chapter" data-level="4.4.2" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#data-viewer"><i class="fa fa-check"></i><b>4.4.2</b> Data Viewer</a></li>
<li class="chapter" data-level="4.4.3" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#names-values-and-functions"><i class="fa fa-check"></i><b>4.4.3</b> Names, values and functions</a></li>
<li class="chapter" data-level="4.4.4" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#plotting"><i class="fa fa-check"></i><b>4.4.4</b> Plotting</a></li>
<li class="chapter" data-level="4.4.5" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#editor"><i class="fa fa-check"></i><b>4.4.5</b> Editor</a></li>
<li class="chapter" data-level="4.4.6" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#files-viewer"><i class="fa fa-check"></i><b>4.4.6</b> Files viewer</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#r-packages"><i class="fa fa-check"></i><b>4.5</b> R packages</a></li>
<li class="chapter" data-level="4.6" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#additional-r-resources"><i class="fa fa-check"></i><b>4.6</b> Additional R resources</a></li>
<li class="chapter" data-level="4.7" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#literate-programming"><i class="fa fa-check"></i><b>4.7</b> Literate Programming</a></li>
<li class="chapter" data-level="4.8" data-path="setting-up-the-r-data-science-toolbox.html"><a href="setting-up-the-r-data-science-toolbox.html#finishing-your-setup"><i class="fa fa-check"></i><b>4.8</b> Finishing your setup</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-data-representation-modeling-ingestion-and-cleaning.html"><a href="part-data-representation-modeling-ingestion-and-cleaning.html"><i class="fa fa-check"></i>(Part) Data representation modeling, ingestion and cleaning</a></li>
<li class="chapter" data-level="5" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html"><i class="fa fa-check"></i><b>5</b> Measurements and Data Types</a><ul>
<li class="chapter" data-level="5.1" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#a-data-analysis-to-get-us-going"><i class="fa fa-check"></i><b>5.1</b> A data analysis to get us going</a></li>
<li class="chapter" data-level="5.2" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#getting-data"><i class="fa fa-check"></i><b>5.2</b> Getting data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#names-values-and-functions-1"><i class="fa fa-check"></i><b>5.2.1</b> Names, values and functions</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#entities-and-attributes"><i class="fa fa-check"></i><b>5.3</b> Entities and attributes</a></li>
<li class="chapter" data-level="5.4" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#categorical-attributes"><i class="fa fa-check"></i><b>5.4</b> Categorical attributes</a><ul>
<li class="chapter" data-level="5.4.1" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#factors-in-r"><i class="fa fa-check"></i><b>5.4.1</b> Factors in R</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#discrete-numeric-attributes"><i class="fa fa-check"></i><b>5.5</b> Discrete numeric attributes</a></li>
<li class="chapter" data-level="5.6" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#continuous-numeric-data"><i class="fa fa-check"></i><b>5.6</b> Continuous numeric data</a></li>
<li class="chapter" data-level="5.7" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#other-examples"><i class="fa fa-check"></i><b>5.7</b> Other examples</a></li>
<li class="chapter" data-level="5.8" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#other-important-datatypes"><i class="fa fa-check"></i><b>5.8</b> Other important datatypes</a></li>
<li class="chapter" data-level="5.9" data-path="measurements-and-data-types.html"><a href="measurements-and-data-types.html#units"><i class="fa fa-check"></i><b>5.9</b> Units</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html"><i class="fa fa-check"></i><b>6</b> Principles: Basic Operations</a><ul>
<li class="chapter" data-level="6.1" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#operations-that-select-attributes"><i class="fa fa-check"></i><b>6.1</b> Operations that select attributes</a><ul>
<li class="chapter" data-level="6.1.1" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#select"><i class="fa fa-check"></i><b>6.1.1</b> <code>select</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#rename"><i class="fa fa-check"></i><b>6.1.2</b> <code>rename</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#operations-that-select-entities"><i class="fa fa-check"></i><b>6.2</b> Operations that select entities</a><ul>
<li class="chapter" data-level="6.2.1" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#slice"><i class="fa fa-check"></i><b>6.2.1</b> <code>slice</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#filter"><i class="fa fa-check"></i><b>6.2.2</b> <code>filter</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#sample_n-and-sample_frac"><i class="fa fa-check"></i><b>6.2.3</b> <code>sample_n</code> and <code>sample_frac</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="principles-basic-operations.html"><a href="principles-basic-operations.html#pipelines-of-operations"><i class="fa fa-check"></i><b>6.3</b> Pipelines of operations</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="principles-more-operations.html"><a href="principles-more-operations.html"><i class="fa fa-check"></i><b>7</b> Principles: More Operations</a><ul>
<li class="chapter" data-level="7.1" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-sort-entities"><i class="fa fa-check"></i><b>7.1</b> Operations that sort entities</a></li>
<li class="chapter" data-level="7.2" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-create-new-attributes"><i class="fa fa-check"></i><b>7.2</b> Operations that create new attributes</a></li>
<li class="chapter" data-level="7.3" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-summarize-attribute-values-over-entities"><i class="fa fa-check"></i><b>7.3</b> Operations that summarize attribute values over entities</a></li>
<li class="chapter" data-level="7.4" data-path="principles-more-operations.html"><a href="principles-more-operations.html#operations-that-group-entities"><i class="fa fa-check"></i><b>7.4</b> Operations that group entities</a></li>
<li class="chapter" data-level="7.5" data-path="principles-more-operations.html"><a href="principles-more-operations.html#vectors"><i class="fa fa-check"></i><b>7.5</b> Vectors</a></li>
<li class="chapter" data-level="7.6" data-path="principles-more-operations.html"><a href="principles-more-operations.html#attributes-as-vectors"><i class="fa fa-check"></i><b>7.6</b> Attributes as vectors</a></li>
<li class="chapter" data-level="7.7" data-path="principles-more-operations.html"><a href="principles-more-operations.html#functions"><i class="fa fa-check"></i><b>7.7</b> Functions</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html"><i class="fa fa-check"></i><b>8</b> Basic plotting with <code>ggplot</code></a><ul>
<li class="chapter" data-level="8.1" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#plot-construction-details"><i class="fa fa-check"></i><b>8.1</b> Plot Construction Details</a><ul>
<li class="chapter" data-level="8.1.1" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#mappings"><i class="fa fa-check"></i><b>8.1.1</b> Mappings</a></li>
<li class="chapter" data-level="8.1.2" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#representations"><i class="fa fa-check"></i><b>8.1.2</b> Representations</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#frequently-used-plots"><i class="fa fa-check"></i><b>8.2</b> Frequently Used Plots</a><ul>
<li class="chapter" data-level="8.2.1" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#scatter-plot"><i class="fa fa-check"></i><b>8.2.1</b> Scatter plot</a></li>
<li class="chapter" data-level="8.2.2" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#bar-graph"><i class="fa fa-check"></i><b>8.2.2</b> Bar graph</a></li>
<li class="chapter" data-level="8.2.3" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#histogram"><i class="fa fa-check"></i><b>8.2.3</b> Histogram</a></li>
<li class="chapter" data-level="8.2.4" data-path="basic-plotting-with-ggplot.html"><a href="basic-plotting-with-ggplot.html#boxplot"><i class="fa fa-check"></i><b>8.2.4</b> Boxplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="brief-introduction-to-rmarkdown.html"><a href="brief-introduction-to-rmarkdown.html"><i class="fa fa-check"></i><b>9</b> Brief Introduction to Rmarkdown</a></li>
<li class="chapter" data-level="10" data-path="best-practices-for-data-science-projects.html"><a href="best-practices-for-data-science-projects.html"><i class="fa fa-check"></i><b>10</b> Best Practices for Data Science Projects</a></li>
<li class="chapter" data-level="11" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html"><i class="fa fa-check"></i><b>11</b> Tidy Data I: The ER Model</a><ul>
<li class="chapter" data-level="11.1" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#overview"><i class="fa fa-check"></i><b>11.1</b> Overview</a></li>
<li class="chapter" data-level="11.2" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#the-entity-relationship-and-relational-models"><i class="fa fa-check"></i><b>11.2</b> The Entity-Relationship and Relational Models</a><ul>
<li class="chapter" data-level="11.2.1" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#formal-introduction-to-keys"><i class="fa fa-check"></i><b>11.2.1</b> Formal introduction to keys</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="tidy-data-i-the-er-model.html"><a href="tidy-data-i-the-er-model.html#tidy-data"><i class="fa fa-check"></i><b>11.3</b> Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="sql-i-single-table-queries.html"><a href="sql-i-single-table-queries.html"><i class="fa fa-check"></i><b>12</b> SQL I: Single Table Queries</a><ul>
<li class="chapter" data-level="12.1" data-path="sql-i-single-table-queries.html"><a href="sql-i-single-table-queries.html#group-by-and-summarize"><i class="fa fa-check"></i><b>12.1</b> Group-by and summarize</a></li>
<li class="chapter" data-level="12.2" data-path="sql-i-single-table-queries.html"><a href="sql-i-single-table-queries.html#subqueries"><i class="fa fa-check"></i><b>12.2</b> Subqueries</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="two-table-operations.html"><a href="two-table-operations.html"><i class="fa fa-check"></i><b>13</b> Two-table operations</a><ul>
<li class="chapter" data-level="13.1" data-path="two-table-operations.html"><a href="two-table-operations.html#left-join"><i class="fa fa-check"></i><b>13.1</b> Left Join</a></li>
<li class="chapter" data-level="13.2" data-path="two-table-operations.html"><a href="two-table-operations.html#right-join"><i class="fa fa-check"></i><b>13.2</b> Right Join</a></li>
<li class="chapter" data-level="13.3" data-path="two-table-operations.html"><a href="two-table-operations.html#inner-join"><i class="fa fa-check"></i><b>13.3</b> Inner Join</a></li>
<li class="chapter" data-level="13.4" data-path="two-table-operations.html"><a href="two-table-operations.html#full-join"><i class="fa fa-check"></i><b>13.4</b> Full Join</a></li>
<li class="chapter" data-level="13.5" data-path="two-table-operations.html"><a href="two-table-operations.html#join-conditions"><i class="fa fa-check"></i><b>13.5</b> Join conditions</a></li>
<li class="chapter" data-level="13.6" data-path="two-table-operations.html"><a href="two-table-operations.html#filtering-joins"><i class="fa fa-check"></i><b>13.6</b> Filtering Joins</a></li>
<li class="chapter" data-level="13.7" data-path="two-table-operations.html"><a href="two-table-operations.html#sql-constructs-multi-table-queries"><i class="fa fa-check"></i><b>13.7</b> SQL Constructs: Multi-table Queries</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sql-system-constructs.html"><a href="sql-system-constructs.html"><i class="fa fa-check"></i><b>14</b> SQL System Constructs</a><ul>
<li class="chapter" data-level="14.1" data-path="sql-system-constructs.html"><a href="sql-system-constructs.html#sql-as-a-data-definition-language"><i class="fa fa-check"></i><b>14.1</b> SQL as a Data Definition Language</a></li>
<li class="chapter" data-level="14.2" data-path="sql-system-constructs.html"><a href="sql-system-constructs.html#set-operations-and-comparisons"><i class="fa fa-check"></i><b>14.2</b> Set Operations and Comparisons</a></li>
<li class="chapter" data-level="14.3" data-path="sql-system-constructs.html"><a href="sql-system-constructs.html#views"><i class="fa fa-check"></i><b>14.3</b> Views</a></li>
<li class="chapter" data-level="14.4" data-path="sql-system-constructs.html"><a href="sql-system-constructs.html#nulls"><i class="fa fa-check"></i><b>14.4</b> NULLs</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="db-parting-shots.html"><a href="db-parting-shots.html"><i class="fa fa-check"></i><b>15</b> DB Parting Shots</a><ul>
<li class="chapter" data-level="15.1" data-path="db-parting-shots.html"><a href="db-parting-shots.html#database-query-optimization"><i class="fa fa-check"></i><b>15.1</b> Database Query Optimization</a></li>
<li class="chapter" data-level="15.2" data-path="db-parting-shots.html"><a href="db-parting-shots.html#json-data-model"><i class="fa fa-check"></i><b>15.2</b> JSON Data Model</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="ingesting-data.html"><a href="ingesting-data.html"><i class="fa fa-check"></i><b>16</b> Ingesting data</a><ul>
<li class="chapter" data-level="16.1" data-path="ingesting-data.html"><a href="ingesting-data.html#structured-ingestion"><i class="fa fa-check"></i><b>16.1</b> Structured ingestion</a><ul>
<li class="chapter" data-level="16.1.1" data-path="ingesting-data.html"><a href="ingesting-data.html#csv-files-and-similar"><i class="fa fa-check"></i><b>16.1.1</b> CSV files (and similar)</a></li>
<li class="chapter" data-level="16.1.2" data-path="ingesting-data.html"><a href="ingesting-data.html#excel-spreadsheets"><i class="fa fa-check"></i><b>16.1.2</b> Excel spreadsheets</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="ingesting-data.html"><a href="ingesting-data.html#scraping"><i class="fa fa-check"></i><b>16.2</b> Scraping</a><ul>
<li class="chapter" data-level="16.2.1" data-path="ingesting-data.html"><a href="ingesting-data.html#scraping-from-dirty-html-tables"><i class="fa fa-check"></i><b>16.2.1</b> Scraping from dirty HTML tables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>17</b> Tidying data</a><ul>
<li class="chapter" data-level="17.1" data-path="tidying-data.html"><a href="tidying-data.html#tidy-data-1"><i class="fa fa-check"></i><b>17.1</b> Tidy Data</a></li>
<li class="chapter" data-level="17.2" data-path="tidying-data.html"><a href="tidying-data.html#common-problems-in-messy-data"><i class="fa fa-check"></i><b>17.2</b> Common problems in messy data</a><ul>
<li class="chapter" data-level="17.2.1" data-path="tidying-data.html"><a href="tidying-data.html#headers-as-values"><i class="fa fa-check"></i><b>17.2.1</b> Headers as values</a></li>
<li class="chapter" data-level="17.2.2" data-path="tidying-data.html"><a href="tidying-data.html#multiple-variables-in-one-column"><i class="fa fa-check"></i><b>17.2.2</b> Multiple variables in one column</a></li>
<li class="chapter" data-level="17.2.3" data-path="tidying-data.html"><a href="tidying-data.html#variables-stored-in-both-rows-and-columns"><i class="fa fa-check"></i><b>17.2.3</b> Variables stored in both rows and columns</a></li>
<li class="chapter" data-level="17.2.4" data-path="tidying-data.html"><a href="tidying-data.html#multiple-types-in-one-table"><i class="fa fa-check"></i><b>17.2.4</b> Multiple types in one table</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="18" data-path="text-and-dates.html"><a href="text-and-dates.html"><i class="fa fa-check"></i><b>18</b> Text and Dates</a><ul>
<li class="chapter" data-level="18.1" data-path="text-and-dates.html"><a href="text-and-dates.html#text"><i class="fa fa-check"></i><b>18.1</b> Text</a><ul>
<li class="chapter" data-level="18.1.1" data-path="text-and-dates.html"><a href="text-and-dates.html#string-operations"><i class="fa fa-check"></i><b>18.1.1</b> String operations</a></li>
<li class="chapter" data-level="18.1.2" data-path="text-and-dates.html"><a href="text-and-dates.html#regular-expressions"><i class="fa fa-check"></i><b>18.1.2</b> Regular expressions</a></li>
<li class="chapter" data-level="18.1.3" data-path="text-and-dates.html"><a href="text-and-dates.html#tools-using-regular-expressions"><i class="fa fa-check"></i><b>18.1.3</b> Tools using regular expressions</a></li>
<li class="chapter" data-level="18.1.4" data-path="text-and-dates.html"><a href="text-and-dates.html#extracting-attributes-from-text"><i class="fa fa-check"></i><b>18.1.4</b> Extracting attributes from text</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="text-and-dates.html"><a href="text-and-dates.html#handling-dates"><i class="fa fa-check"></i><b>18.2</b> Handling dates</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="entity-resolution-and-record-linkage.html"><a href="entity-resolution-and-record-linkage.html"><i class="fa fa-check"></i><b>19</b> Entity Resolution and Record Linkage</a></li>
<li class="chapter" data-level="" data-path="part-exploratory-data-analysis.html"><a href="part-exploratory-data-analysis.html"><i class="fa fa-check"></i>(Part) Exploratory Data Analysis</a></li>
<li class="chapter" data-level="20" data-path="exploratory-data-analysis-visualization.html"><a href="exploratory-data-analysis-visualization.html"><i class="fa fa-check"></i><b>20</b> Exploratory Data Analysis: Visualization</a><ul>
<li class="chapter" data-level="20.0.1" data-path="exploratory-data-analysis-visualization.html"><a href="exploratory-data-analysis-visualization.html#eda-exploratory-data-analysis"><i class="fa fa-check"></i><b>20.0.1</b> EDA (Exploratory Data Analysis)</a></li>
<li class="chapter" data-level="20.1" data-path="exploratory-data-analysis-visualization.html"><a href="exploratory-data-analysis-visualization.html#visualization-of-single-variables"><i class="fa fa-check"></i><b>20.1</b> Visualization of single variables</a><ul>
<li class="chapter" data-level="20.1.1" data-path="exploratory-data-analysis-visualization.html"><a href="exploratory-data-analysis-visualization.html#visualization-of-pairs-of-variables"><i class="fa fa-check"></i><b>20.1.1</b> Visualization of pairs of variables</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="exploratory-data-analysis-visualization.html"><a href="exploratory-data-analysis-visualization.html#eda-with-the-grammar-of-graphics"><i class="fa fa-check"></i><b>20.2</b> EDA with the grammar of graphics</a><ul>
<li class="chapter" data-level="20.2.1" data-path="exploratory-data-analysis-visualization.html"><a href="exploratory-data-analysis-visualization.html#other-aesthetics"><i class="fa fa-check"></i><b>20.2.1</b> Other aesthetics</a></li>
<li class="chapter" data-level="20.2.2" data-path="exploratory-data-analysis-visualization.html"><a href="exploratory-data-analysis-visualization.html#faceting"><i class="fa fa-check"></i><b>20.2.2</b> Faceting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html"><i class="fa fa-check"></i><b>21</b> Exploratory Data Analysis: Summary Statistics</a><ul>
<li class="chapter" data-level="21.1" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#range"><i class="fa fa-check"></i><b>21.1</b> Range</a></li>
<li class="chapter" data-level="21.2" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#central-tendency"><i class="fa fa-check"></i><b>21.2</b> Central Tendency</a><ul>
<li class="chapter" data-level="21.2.1" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#derivation-of-the-mean-as-central-tendency-statistic"><i class="fa fa-check"></i><b>21.2.1</b> Derivation of the mean as central tendency statistic</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#spread"><i class="fa fa-check"></i><b>21.3</b> Spread</a><ul>
<li class="chapter" data-level="21.3.1" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#variance"><i class="fa fa-check"></i><b>21.3.1</b> Variance</a></li>
<li class="chapter" data-level="21.3.2" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#spread-estimates-using-rank-statistics"><i class="fa fa-check"></i><b>21.3.2</b> Spread estimates using rank statistics</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#outliers"><i class="fa fa-check"></i><b>21.4</b> Outliers</a></li>
<li class="chapter" data-level="21.5" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#skew"><i class="fa fa-check"></i><b>21.5</b> Skew</a></li>
<li class="chapter" data-level="21.6" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#covariance-and-correlation"><i class="fa fa-check"></i><b>21.6</b> Covariance and correlation</a></li>
<li class="chapter" data-level="21.7" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#postscript-finding-maximaminima-using-derivatives"><i class="fa fa-check"></i><b>21.7</b> Postscript: Finding Maxima/Minima using Derivatives</a><ul>
<li class="chapter" data-level="21.7.1" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#steps-to-find-maximaminima-of-function-fx"><i class="fa fa-check"></i><b>21.7.1</b> Steps to find Maxima/Minima of function <span class="math inline">\(f(x)\)</span></a></li>
<li class="chapter" data-level="21.7.2" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#notes-on-finding-derivatives"><i class="fa fa-check"></i><b>21.7.2</b> Notes on Finding Derivatives</a></li>
<li class="chapter" data-level="21.7.3" data-path="exploratory-data-analysis-summary-statistics.html"><a href="exploratory-data-analysis-summary-statistics.html#resources"><i class="fa fa-check"></i><b>21.7.3</b> Resources:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="eda-data-transformations.html"><a href="eda-data-transformations.html"><i class="fa fa-check"></i><b>22</b> EDA: Data Transformations</a><ul>
<li class="chapter" data-level="22.1" data-path="eda-data-transformations.html"><a href="eda-data-transformations.html#centering-and-scaling"><i class="fa fa-check"></i><b>22.1</b> Centering and scaling</a></li>
<li class="chapter" data-level="22.2" data-path="eda-data-transformations.html"><a href="eda-data-transformations.html#treating-categorical-variables-as-numeric"><i class="fa fa-check"></i><b>22.2</b> Treating categorical variables as numeric</a><ul>
<li class="chapter" data-level="22.2.1" data-path="eda-data-transformations.html"><a href="eda-data-transformations.html#discretizing-continuous-values."><i class="fa fa-check"></i><b>22.2.1</b> Discretizing continuous values.</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="eda-data-transformations.html"><a href="eda-data-transformations.html#skewed-data"><i class="fa fa-check"></i><b>22.3</b> Skewed Data</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="eda-handling-missing-data.html"><a href="eda-handling-missing-data.html"><i class="fa fa-check"></i><b>23</b> EDA: Handling Missing Data</a><ul>
<li class="chapter" data-level="23.0.1" data-path="eda-handling-missing-data.html"><a href="eda-handling-missing-data.html#dealing-with-data-missing-at-random"><i class="fa fa-check"></i><b>23.0.1</b> Dealing with data missing at random</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="part-statistical-learning.html"><a href="part-statistical-learning.html"><i class="fa fa-check"></i>(Part) Statistical Learning</a></li>
<li class="chapter" data-level="24" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html"><i class="fa fa-check"></i><b>24</b> Univariate distributions and statistics</a><ul>
<li class="chapter" data-level="24.1" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#variation-randomness-and-stochasticity"><i class="fa fa-check"></i><b>24.1</b> Variation, randomness and stochasticity</a><ul>
<li class="chapter" data-level="24.1.1" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#random-variables"><i class="fa fa-check"></i><b>24.1.1</b> Random variables</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#discrete-probability-distributions"><i class="fa fa-check"></i><b>24.2</b> (Discrete) Probability distributions</a><ul>
<li class="chapter" data-level="24.2.1" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#example-the-oracle-of-tweet"><i class="fa fa-check"></i><b>24.2.1</b> Example The oracle of TWEET</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#expectation"><i class="fa fa-check"></i><b>24.3</b> Expectation</a></li>
<li class="chapter" data-level="24.4" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#estimation"><i class="fa fa-check"></i><b>24.4</b> Estimation</a><ul>
<li class="chapter" data-level="24.4.1" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#law-of-large-numbers-lln"><i class="fa fa-check"></i><b>24.4.1</b> Law of large numbers (LLN)</a></li>
<li class="chapter" data-level="24.4.2" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#central-limit-theorem-clt"><i class="fa fa-check"></i><b>24.4.2</b> Central Limit Theorem (CLT)</a></li>
</ul></li>
<li class="chapter" data-level="24.5" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#the-normal-distribution"><i class="fa fa-check"></i><b>24.5</b> The normal distribution</a><ul>
<li class="chapter" data-level="24.5.1" data-path="univariate-distributions-and-statistics.html"><a href="univariate-distributions-and-statistics.html#clt-continued"><i class="fa fa-check"></i><b>24.5.1</b> CLT continued</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="experiment-design-and-hypothesis-testing.html"><a href="experiment-design-and-hypothesis-testing.html"><i class="fa fa-check"></i><b>25</b> Experiment design and hypothesis testing</a><ul>
<li class="chapter" data-level="25.0.1" data-path="experiment-design-and-hypothesis-testing.html"><a href="experiment-design-and-hypothesis-testing.html#inference"><i class="fa fa-check"></i><b>25.0.1</b> Inference</a></li>
<li class="chapter" data-level="25.0.2" data-path="experiment-design-and-hypothesis-testing.html"><a href="experiment-design-and-hypothesis-testing.html#hypothesis-testing"><i class="fa fa-check"></i><b>25.0.2</b> Hypothesis testing</a></li>
<li class="chapter" data-level="25.0.3" data-path="experiment-design-and-hypothesis-testing.html"><a href="experiment-design-and-hypothesis-testing.html#summary-1"><i class="fa fa-check"></i><b>25.0.3</b> Summary</a></li>
<li class="chapter" data-level="25.0.4" data-path="experiment-design-and-hypothesis-testing.html"><a href="experiment-design-and-hypothesis-testing.html#probability-distributions"><i class="fa fa-check"></i><b>25.0.4</b> Probability Distributions</a></li>
<li class="chapter" data-level="25.0.5" data-path="experiment-design-and-hypothesis-testing.html"><a href="experiment-design-and-hypothesis-testing.html#distributions-in-r"><i class="fa fa-check"></i><b>25.0.5</b> Distributions in R</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="multivariate-probability.html"><a href="multivariate-probability.html"><i class="fa fa-check"></i><b>26</b> Multivariate probability</a><ul>
<li class="chapter" data-level="26.0.1" data-path="multivariate-probability.html"><a href="multivariate-probability.html#joint-and-conditional-probability"><i class="fa fa-check"></i><b>26.0.1</b> Joint and conditional probability</a></li>
<li class="chapter" data-level="26.0.2" data-path="multivariate-probability.html"><a href="multivariate-probability.html#conditional-expectation"><i class="fa fa-check"></i><b>26.0.2</b> Conditional expectation</a></li>
<li class="chapter" data-level="26.0.3" data-path="multivariate-probability.html"><a href="multivariate-probability.html#maximum-likelihood"><i class="fa fa-check"></i><b>26.0.3</b> Maximum likelihood</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lecture Notes: Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ingesting-data" class="section level1">
<h1><span class="header-section-number">16</span> Ingesting data</h1>
<p>Now that we have a better understanding of data analysis languages with <code>tidyverse</code> and <code>SQL</code>, we turn to the first significant challenge in data analysis, getting data into R in a shape that we can use to start our analysis. We will look at two types of data ingestion: <em>structured ingestion</em>, where we read data that is already structured, like a comma separated value (CSV) file, and <em>scraping</em> where we obtain data from text, usually in websites.</p>
<p>There is an excellent discussion on data import here: <a href="http://r4ds.had.co.nz/data-import.html" class="uri">http://r4ds.had.co.nz/data-import.html</a></p>
<div id="structured-ingestion" class="section level2">
<h2><span class="header-section-number">16.1</span> Structured ingestion</h2>
<div id="csv-files-and-similar" class="section level3">
<h3><span class="header-section-number">16.1.1</span> CSV files (and similar)</h3>
<p>We saw in a previous chapter how we can use the <code>read_csv</code> file to read data from a CSV file into a data frame. Comma separated value (CSV) files are structured in a somewhat regular way, so reading into a data frame is straightforward. Each line in the CSV file corresponds to an observation (a row in a data frame). Each line contains values separated by a comma (<code>,</code>), corresponding to the variables of each observation.</p>
<p>This ideal principle of how a CSV file is constructed is frequently violated by data contained in CSV files. To get a sense of how to deal with these cases look at the documentation of the <code>read_csv</code> function. For instance:</p>
<ul>
<li><p>the first line of the file may or may not contain the names of variables for the data frame (<code>col_names</code> argument).</p></li>
<li><p>strings are quoted using <code>'</code> instead of <code>&quot;</code> (<code>quote</code> argument)</p></li>
<li><p>missing data is encoded with a non-standard code, e.g., <code>-</code> (<code>na</code> argument)</p></li>
<li><p>values are separated by a character other than <code>,</code> (<code>read_delim</code> function)</p></li>
<li><p>file may contain header information before the actual data so we have to skip some lines when loading the data (<code>skip</code> argument)</p></li>
</ul>
<p>You should read the documentation of the <code>read_csv</code> function to appreciate the complexities it can maneuver when reading data from structured text files.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?read_csv</code></pre></div>
<p>When loading a CSV file, we need to determine how to treat values for each attribute in the dataset. When we call <code>read_csv</code>, it guesses as to the best way to parse each attribute (e.g., is it a number, is it a factor, is it free text, how is missing data encoded). The <code>readr</code> package implements a set of core functions <code>parse_*</code> that parses vectors into different data types (e.g., <code>parse_number</code>, <code>parse_datetime</code>, <code>parse_factor</code>). When we call <code>read_csv</code> it will print it’s data types guesses and any problems it encounters.</p>
<p>The <code>problems</code> function let’s you inspect parsing problems. E.g.,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">readr_example</span>(<span class="st">&quot;challenge.csv&quot;</span>))</code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   x = col_integer(),
##   y = col_character()
## )</code></pre>
<pre><code>## Warning in rbind(names(probs), probs_f): number of columns of result is not
## a multiple of vector length (arg 1)</code></pre>
<pre><code>## Warning: 1000 parsing failures.
## row # A tibble: 5 x 5 col     row col   expected               actual             file               expected   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                  &lt;chr&gt;              &lt;chr&gt;              actual 1  1001 x     no trailing characters .23837975086644292 &#39;/Library/Framewo… file 2  1002 x     no trailing characters .41167997173033655 &#39;/Library/Framewo… row 3  1003 x     no trailing characters .7460716762579978  &#39;/Library/Framewo… col 4  1004 x     no trailing characters .723450553836301   &#39;/Library/Framewo… expected 5  1005 x     no trailing characters .614524137461558   &#39;/Library/Framewo…
## ... ................. ... .......................................................................... ........ .......................................................................... ...... .......................................................................... .... .......................................................................... ... .......................................................................... ... .......................................................................... ........ ..........................................................................
## See problems(...) for more details.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">problems</span>(df)</code></pre></div>
<pre><code>## # A tibble: 1,000 x 5
##      row col   expected               actual             file             
##    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                  &lt;chr&gt;              &lt;chr&gt;            
##  1  1001 x     no trailing characters .23837975086644292 &#39;/Library/Framew…
##  2  1002 x     no trailing characters .41167997173033655 &#39;/Library/Framew…
##  3  1003 x     no trailing characters .7460716762579978  &#39;/Library/Framew…
##  4  1004 x     no trailing characters .723450553836301   &#39;/Library/Framew…
##  5  1005 x     no trailing characters .614524137461558   &#39;/Library/Framew…
##  6  1006 x     no trailing characters .473980569280684   &#39;/Library/Framew…
##  7  1007 x     no trailing characters .5784610391128808  &#39;/Library/Framew…
##  8  1008 x     no trailing characters .2415937229525298  &#39;/Library/Framew…
##  9  1009 x     no trailing characters .11437866208143532 &#39;/Library/Framew…
## 10  1010 x     no trailing characters .2983446326106787  &#39;/Library/Framew…
## # ... with 990 more rows</code></pre>
<p>The argument <code>col_types</code> is used to help the parser handle datatypes correctly.</p>
<p>In class discussion: how to parse <code>readr_example(&quot;challenge.csv&quot;)</code></p>
<p>Other hints:</p>
<ul>
<li>You can read every attribute as character using <code>col_types=cols(.default=col_character())</code>. Combine this with <code>type_convert</code> to parse character attributes into other types:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">readr_example</span>(<span class="st">&quot;challenge.csv&quot;</span>), <span class="dt">col_types=</span><span class="kw">cols</span>(<span class="dt">.default=</span><span class="kw">col_character</span>())) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">type_convert</span>(<span class="kw">cols</span>(<span class="dt">x=</span><span class="kw">col_double</span>(), <span class="dt">y=</span><span class="kw">col_date</span>()))</code></pre></div>
<ul>
<li>If nothing else works, you can read file lines using <code>read_lines</code> and then parse lines using string processing operations (which we will see shortly).</li>
</ul>
</div>
<div id="excel-spreadsheets" class="section level3">
<h3><span class="header-section-number">16.1.2</span> Excel spreadsheets</h3>
<p>Often you will need to ingest data that is stored in an Excel spreadsheet. The <code>readxl</code> package is used to do this. The main function for this package is the <code>read_excel</code> function. It contains similar arguments to the <code>read_csv</code> function we saw above.</p>
</div>
</div>
<div id="scraping" class="section level2">
<h2><span class="header-section-number">16.2</span> Scraping</h2>
<p>Often, data we want to use is hosted as part of HTML files in webpages. The markup structure of HTML allows to parse data into tables we can use for analysis. Let’s use the Rotten Tomatoes ratings webpage for Diego Luna as an example:</p>
<div class="figure">
<img src="img/rt_diegoluna.png" />

</div>
<p>We can scrape ratings for his movies from this page. To do this we need to figure out how the HTML page’s markup can help us write R expressions to find this data in the page. Most web browsers have facilities to show page markup. In Google Chrome, you can use <code>View&gt;Developer&gt;Developer Tools</code>, and inspect the page markdown to find where the data is contained. In this example, we see that the data we want is in a <code>&lt;table&gt;</code> element in the page, with id <code>filmographyTbl</code>.</p>
<div class="figure">
<img src="img/rt_devtools.png" />

</div>
<p>Now that we have that information, we can use the <code>rvest</code> package to scrape this data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rvest)

url &lt;-<span class="st"> &quot;https://www.rottentomatoes.com/celebrity/diego_luna&quot;</span>

dl_tab &lt;-<span class="st"> </span>url <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">read_html</span>() <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="st">&quot;#filmographyTbl&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_table</span>()

<span class="kw">head</span>(dl_tab)</code></pre></div>
<pre><code>##   RATING                        TITLE
## 1     5%                   Flatliners
## 2    85% Rogue One: A Star Wars Story
## 3    88%                 Blood Father
## 4    62%            Mr. Pig (Sr. Pig)
## 5    82%             The Book of Life
## 6    39%                 Cesar Chavez
##                                                                                                                                                                                                                                                                                                     CREDIT
## 1                                                                                                                                                                                                                                                                                                      Ray
## 2                                                                                                                                                                                                                                                                                    Captain Cassian Andor
## 3                                                                                                                                                                                                                                                                                                    Jonah
## 4 Producer\n                                                \n                                    \n                                            Screenwriter\n                                                \n                                    \n                                            Director
## 5                                                                                                                                                                                                                                                                                                   Manolo
## 6                                                                                                                                                   Producer\n                                                \n                                    \n                                            Director
##   BOX OFFICE YEAR
## 1     $16.9M 2017
## 2    $532.2M 2016
## 3          — 2016
## 4          — 2016
## 5          — 2014
## 6      $5.6M 2014</code></pre>
<p>The main two functions we used here are <code>html_node</code> and <code>html_table</code>. <code>html_node</code> finds elements in the HTML page according to some selection criteria. Since we want the element with <code>id=filmographyTbl</code> we use the <code>#</code> selection operation since that corresponds to selection by id. Once the desired element in the page is selected, we can use the <code>html_table</code> function to parse the element’s text into a data frame.</p>
<p>The argument to the <code>html_node</code> function uses CSS selector syntax: <a href="https://www.w3.org/TR/CSS2/selector.html" class="uri">https://www.w3.org/TR/CSS2/selector.html</a></p>
<p><strong>On your own:</strong> If you wanted to extract the TV filmography from the page, how would you change this call?</p>
<div id="scraping-from-dirty-html-tables" class="section level3">
<h3><span class="header-section-number">16.2.1</span> Scraping from dirty HTML tables</h3>
<p>We saw above how to extract data from HTML tables. But what if the data we want to extract is not cleanly formatted as a HTML table, or is spread over multiple html pages?</p>
<p>Let’s look at an example where we scrape titles and artists from billboard #1 songs: <a href="https://en.wikipedia.org/wiki/List_of_Billboard_Hot_100_number-one_singles_of_2017" class="uri">https://en.wikipedia.org/wiki/List_of_Billboard_Hot_100_number-one_singles_of_2017</a></p>
<p>Let’s start by reading the HTML markup and finding the document node that contains the table we want to scrape</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rvest)
url &lt;-<span class="st"> &quot;https://en.wikipedia.org/wiki/List_of_Billboard_Hot_100_number-one_singles_of_2017&quot;</span>
singles_tab_node &lt;-<span class="st"> </span><span class="kw">read_html</span>(url) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">html_node</span>(<span class="st">&quot;.plainrowheaders&quot;</span>)
singles_tab_node</code></pre></div>
<pre><code>## {xml_node}
## &lt;table class=&quot;wikitable plainrowheaders&quot; style=&quot;text-align: center&quot;&gt;
##  [1] &lt;tr&gt;\n&lt;th&gt;Issue date&lt;/th&gt;\n&lt;th&gt;Song&lt;/th&gt;\n&lt;th&gt;Artist(s)&lt;/th&gt;\n&lt;th&gt;R ...
##  [2] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;January 7&lt;/th&gt;\n&lt;td&gt;&quot;&lt;a href=&quot;/wiki/Starboy_( ...
##  [3] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;January 14&lt;/th&gt;\n&lt;td&gt;&quot;&lt;a href=&quot;/wiki/Black_Be ...
##  [4] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;January 21&lt;/th&gt;\n&lt;td&gt;&quot;&lt;a href=&quot;/wiki/Bad_and_ ...
##  [5] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;January 28&lt;/th&gt;\n&lt;td bgcolor=&quot;#FFFF99&quot;&gt;&quot;&lt;a hr ...
##  [6] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;February 4&lt;/th&gt;\n&lt;td rowspan=&quot;2&quot;&gt;&quot;Bad and Bou ...
##  [7] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;February 11&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-7&quot; cl ...
##  [8] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;February 18&lt;/th&gt;\n&lt;td bgcolor=&quot;#FFFF99&quot; rowsp ...
##  [9] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;February 25&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-9&quot; cl ...
## [10] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;March 4&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-10&quot; class ...
## [11] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;March 11&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-11&quot; clas ...
## [12] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;March 18&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-12&quot; clas ...
## [13] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;March 25&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-13&quot; clas ...
## [14] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;April 1&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-14&quot; class ...
## [15] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;April 8&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-15&quot; class ...
## [16] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;April 15&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-16&quot; clas ...
## [17] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;April 22&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-17&quot; clas ...
## [18] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;April 29&lt;/th&gt;\n&lt;td&gt;&lt;sup id=&quot;cite_ref-18&quot; clas ...
## [19] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;May 6&lt;/th&gt;\n&lt;td&gt;&quot;&lt;a href=&quot;/wiki/Humble_(song) ...
## [20] &lt;tr&gt;\n&lt;th scope=&quot;row&quot;&gt;May 13&lt;/th&gt;\n&lt;td&gt;&quot;&lt;a href=&quot;/wiki/That%27s_Wha ...
## ...</code></pre>
<p>Since the rows of the table are not cleanly aligned, we need to extract each attribute separately. Let’s start with the dates in the first column. Since we noticed that the nodes containing dates have attribute <code>scope</code> we use the attribute CSS selector <code>[scope]</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dates &lt;-<span class="st"> </span>singles_tab_node <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_nodes</span>(<span class="st">&quot;[scope]&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_text</span>()
dates <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>()</code></pre></div>
<pre><code>## [1] &quot;January 7&quot;   &quot;January 14&quot;  &quot;January 21&quot;  &quot;January 28&quot;  &quot;February 4&quot; 
## [6] &quot;February 11&quot;</code></pre>
<p>Next, we extract song titles, first we grab the <code>tr</code> (table row) nodes and extract from each the first <code>td</code> node using the <code>td:first-of-type</code> CSS selector. Notice that this gets us the header row which we remove using the <code>magrittr::extract</code> function. The title nodes also tell us how many rows this spans, which we grab from the <code>rowspan</code> attribute.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">title_nodes &lt;-<span class="st"> </span>singles_tab_node <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_nodes</span>(<span class="st">&quot;tr&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_node</span>(<span class="st">&quot;td:first-of-type&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>magrittr<span class="op">::</span><span class="kw">extract</span>(<span class="op">-</span><span class="dv">1</span>)
song_titles &lt;-<span class="st"> </span>title_nodes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_text</span>()
title_spans &lt;-<span class="st"> </span>title_nodes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_attr</span>(<span class="st">&quot;rowspan&quot;</span>)
<span class="kw">cbind</span>(song_titles, title_spans) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>##       song_titles          title_spans
##  [1,] &quot;\&quot;Starboy\&quot;&quot;        NA         
##  [2,] &quot;\&quot;Black Beatles\&quot;&quot;  NA         
##  [3,] &quot;\&quot;Bad and Boujee\&quot;&quot; NA         
##  [4,] &quot;\&quot;Shape of You\&quot; &quot;  NA         
##  [5,] &quot;\&quot;Bad and Boujee\&quot;&quot; &quot;2&quot;        
##  [6,] &quot;[7]&quot;                NA         
##  [7,] &quot;\&quot;Shape of You\&quot; &quot;  &quot;11&quot;       
##  [8,] &quot;[9]&quot;                NA         
##  [9,] &quot;[10]&quot;               NA         
## [10,] &quot;[11]&quot;               NA</code></pre>
<p>To get artist names we get the second data element (<code>td</code>) of each row using the <code>td:nth-of-type(2)</code> CSS selector (again removing the first entry in result coming from the header row)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">artist_nodes &lt;-<span class="st"> </span>singles_tab_node <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_nodes</span>(<span class="st">&quot;tr&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_node</span>(<span class="st">&quot;td:nth-of-type(2)&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>magrittr<span class="op">::</span><span class="kw">extract</span>(<span class="op">-</span><span class="dv">1</span>)
artists &lt;-<span class="st">  </span>artist_nodes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_text</span>()
artists <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] &quot;The Weeknd featuring Daft Punk&quot;   
##  [2] &quot;Rae Sremmurd featuring Gucci Mane&quot;
##  [3] &quot;Migos featuring Lil Uzi Vert&quot;     
##  [4] &quot;Ed Sheeran&quot;                       
##  [5] &quot;Migos featuring Lil Uzi Vert&quot;     
##  [6] NA                                 
##  [7] &quot;Ed Sheeran&quot;                       
##  [8] NA                                 
##  [9] NA                                 
## [10] NA</code></pre>
<p>Now that we’ve extracted each attribute separately we can combine them into a single data frame</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">billboard_df &lt;-<span class="st"> </span><span class="kw">data_frame</span>(<span class="dt">month_day=</span>dates, <span class="dt">year=</span><span class="st">&quot;2017&quot;</span>, <span class="dt">song_title_raw=</span>song_titles, <span class="dt">title_span=</span>title_spans,
                           <span class="dt">artist_raw=</span>artists)
billboard_df</code></pre></div>
<pre><code>## # A tibble: 52 x 5
##    month_day   year  song_title_raw       title_span artist_raw           
##    &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;                &lt;chr&gt;      &lt;chr&gt;                
##  1 January 7   2017  &quot;\&quot;Starboy\&quot;&quot;        &lt;NA&gt;       The Weeknd featuring…
##  2 January 14  2017  &quot;\&quot;Black Beatles\&quot;&quot;  &lt;NA&gt;       Rae Sremmurd featuri…
##  3 January 21  2017  &quot;\&quot;Bad and Boujee\&quot;&quot; &lt;NA&gt;       Migos featuring Lil …
##  4 January 28  2017  &quot;\&quot;Shape of You\&quot; &quot;  &lt;NA&gt;       Ed Sheeran           
##  5 February 4  2017  &quot;\&quot;Bad and Boujee\&quot;&quot; 2          Migos featuring Lil …
##  6 February 11 2017  [7]                  &lt;NA&gt;       &lt;NA&gt;                 
##  7 February 18 2017  &quot;\&quot;Shape of You\&quot; &quot;  11         Ed Sheeran           
##  8 February 25 2017  [9]                  &lt;NA&gt;       &lt;NA&gt;                 
##  9 March 4     2017  [10]                 &lt;NA&gt;       &lt;NA&gt;                 
## 10 March 11    2017  [11]                 &lt;NA&gt;       &lt;NA&gt;                 
## # ... with 42 more rows</code></pre>
<p>This is by no means a clean data frame yet, but we will discuss how to clean up data like this in later lectures. We can now abstract these operations into a function that scrapes the same data for other years.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">scrape_billboard &lt;-<span class="st"> </span><span class="cf">function</span>(year, <span class="dt">baseurl=</span><span class="st">&quot;https://en.wikipedia.org/wiki/List_of_Billboard_Hot_100_number-one_singles_of_&quot;</span>) {
  url &lt;-<span class="st"> </span><span class="kw">paste0</span>(baseurl, year)
  <span class="co"># find table node</span>
  singles_tab_node &lt;-<span class="st"> </span><span class="kw">read_html</span>(url) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">html_node</span>(<span class="st">&quot;.plainrowheaders&quot;</span>) 
  
  <span class="co"># extract dates</span>
  dates &lt;-<span class="st"> </span>singles_tab_node <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_nodes</span>(<span class="st">&quot;[scope]&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_text</span>()
  
  <span class="co"># extract titles and spans</span>
  title_nodes &lt;-<span class="st"> </span>singles_tab_node <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_nodes</span>(<span class="st">&quot;tr&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_node</span>(<span class="st">&quot;td:first-of-type&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>magrittr<span class="op">::</span><span class="kw">extract</span>(<span class="op">-</span><span class="dv">1</span>)
  song_titles &lt;-<span class="st"> </span>title_nodes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_text</span>()
  title_spans &lt;-<span class="st"> </span>title_nodes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_attr</span>(<span class="st">&quot;rowspan&quot;</span>)
  
  <span class="co"># extract artists</span>
  artist_nodes &lt;-<span class="st"> </span>singles_tab_node <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_nodes</span>(<span class="st">&quot;tr&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_node</span>(<span class="st">&quot;td:nth-of-type(2)&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>magrittr<span class="op">::</span><span class="kw">extract</span>(<span class="op">-</span><span class="dv">1</span>)
  artists &lt;-<span class="st">  </span>artist_nodes <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">html_text</span>()
  
  <span class="co"># make data frame</span>
  <span class="kw">data_frame</span>(<span class="dt">month_day=</span>dates, <span class="dt">year=</span>year, <span class="dt">song_title_raw=</span>song_titles, <span class="dt">title_span=</span>title_spans,
                           <span class="dt">artist_raw=</span>artists)
}

<span class="kw">scrape_billboard</span>(<span class="st">&quot;2016&quot;</span>)</code></pre></div>
<pre><code>## # A tibble: 53 x 5
##    month_day   year  song_title_raw       title_span artist_raw           
##    &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;                &lt;chr&gt;      &lt;chr&gt;                
##  1 January 2   2016  &quot;\&quot;Hello\&quot;&quot;          3          Adele                
##  2 January 9   2016  [4]                  &lt;NA&gt;       &lt;NA&gt;                 
##  3 January 16  2016  [5]                  &lt;NA&gt;       &lt;NA&gt;                 
##  4 January 23  2016  &quot;\&quot;Sorry\&quot;&quot;          3          Justin Bieber        
##  5 January 30  2016  [7]                  &lt;NA&gt;       &lt;NA&gt;                 
##  6 February 6  2016  [8]                  &lt;NA&gt;       &lt;NA&gt;                 
##  7 February 13 2016  &quot;\&quot;Love Yourself\&quot; &quot; &lt;NA&gt;       [9]                  
##  8 February 20 2016  &quot;\&quot;Pillowtalk\&quot;&quot;     &lt;NA&gt;       Zayn                 
##  9 February 27 2016  &quot;\&quot;Love Yourself\&quot; &quot; &lt;NA&gt;       Justin Bieber        
## 10 March 5     2016  &quot;\&quot;Work\&quot;&quot;           9          Rihanna featuring Dr…
## # ... with 43 more rows</code></pre>
<p>We can do this for a few years and create a (very dirty) dataset with songs for this current decade:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">billboard_tab &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="dv">2010</span><span class="op">:</span><span class="dv">2017</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>purrr<span class="op">::</span><span class="kw">map_df</span>(scrape_billboard)

billboard_tab <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>(<span class="dv">20</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>knitr<span class="op">::</span><span class="kw">kable</span>(<span class="st">&quot;html&quot;</span>)</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
month_day
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:left;">
song_title_raw
</th>
<th style="text-align:left;">
title_span
</th>
<th style="text-align:left;">
artist_raw
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
January 7
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“Sexy and I Know It”
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
LMFAO
</td>
</tr>
<tr>
<td style="text-align:left;">
January 14
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[13]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
January 21
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“We Found Love”
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Rihanna featuring Calvin Harris
</td>
</tr>
<tr>
<td style="text-align:left;">
January 28
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[15]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
February 4
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“Set Fire to the Rain”
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Adele
</td>
</tr>
<tr>
<td style="text-align:left;">
February 11
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[17]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
February 18
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“Stronger (What Doesn’t Kill You)”
</td>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
Kelly Clarkson
</td>
</tr>
<tr>
<td style="text-align:left;">
February 25
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[19]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
March 3
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“Part of Me”
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Katy Perry
</td>
</tr>
<tr>
<td style="text-align:left;">
March 10
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“Stronger (What Doesn’t Kill You)”
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
Kelly Clarkson
</td>
</tr>
<tr>
<td style="text-align:left;">
March 17
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“We Are Young”
</td>
<td style="text-align:left;">
6
</td>
<td style="text-align:left;">
Fun featuring Janelle Monáe
</td>
</tr>
<tr>
<td style="text-align:left;">
March 24
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[22]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
March 31
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[23]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
April 7
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[24]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
April 14
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[25]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
April 21
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[7]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
April 28
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
“Somebody That I Used to Know”
</td>
<td style="text-align:left;">
8
</td>
<td style="text-align:left;">
Gotye featuring Kimbra
</td>
</tr>
<tr>
<td style="text-align:left;">
May 5
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[27]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
May 12
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[28]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
May 19
</td>
<td style="text-align:left;">
2012
</td>
<td style="text-align:left;">
[29]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>The function <code>purrr::map_df</code> is an example of a very powerful idiom in functional programming: mapping functions on elements of vectors. Here, we first create a vector of years (as strings) using <code>as.character(2010:2017)</code> we pass that to <code>purrr::map_df</code> which applies the function we create, <code>scrape_billboard</code> on each entry of the year vector. Each of these calls evaluates to a <code>data_frame</code> which are then bound (using <code>bind_rows</code>) to create a single long data frame. The tidyverse package <code>purrr</code> defines a lot of these functional programming idioms.</p>
<p>One more thing: here’s a very nice example of <code>rvest</code> at work: <a href="https://deanattali.com/blog/user2017/" class="uri">https://deanattali.com/blog/user2017/</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="db-parting-shots.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidying-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
